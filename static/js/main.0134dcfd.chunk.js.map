{"version":3,"sources":["utils.js","store/store.js","PopupItem.js","PopupSearch.js","PopupCustom.js","ProductItem.js","Placeholder.js","NoProductsFound.jsx","Products.js","Search.js","Filter.js","HomepageSettings.js","App.js","reportWebVitals.js","index.js"],"names":["defaultSettings","isEnabled","getProductURLHref","productID","id","test","window","location","href","EcwidApp","getPayload","store_id","concat","availableFilters","value","label","findEqualById","arr1","arr2","filter","obj1","some","obj2","err","applyFiltersOnProducts","visibleProducts","upsellProducts","activeFilters","length","_step","products","JSON","parse","stringify","_iterator","_createForOfIteratorHelper","s","n","done","console","log","filtered","items","e","f","sanitizeBundleProducts","productWithBundles","_step2","totalOptions","upsell","hasOwnProperty","options","result","_iterator2","_step3","each","parentID","bundle","_iterator3","push","name","thumbnailUrl","defaultDisplayedPriceFormatted","compareToPriceDiscountFormatted","compareToPriceFormatted","url","localURL","process","access_token","useStore","create","subscribeWithSelector","set","get","settings","popupVisibleProducts","populateProducts","_populateProducts","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$get","wrap","_context","prev","next","axios","sent","data","stop","apply","arguments","updateVisibleProducts","_updateVisibleProducts","_callee2","_context2","_x","updatePopupVisibleProducts","_updatePopupVisibleProducts","_callee3","_context3","_x2","getProductById","parseInt","Promise","_ref","_callee4","resolve","reject","_context4","abrupt","getAppPublicConfig","_data","_x3","_x4","setStoreUpsellProducts","addUpsellProduct","_addUpsellProduct","_callee5","bundleID","bundleProducts","_parentProduct","parentProduct","parent","bundleProduct","existingBundles","currentProduct","_bundle","_updated","updated","payload","_context5","t0","_existing","Symbol","iterator","Object","_toConsumableArray","Set","setAppPublicConfig","error","_x5","_x6","getUpsellProductById","_getUpsellProductById","_callee6","res","_context6","_x7","deleteUpsellProductById","_deleteUpsellProductById","_callee7","updatedBundle","_context7","find","_x8","_x9","setSettings","_setSettings","_callee8","_context8","Error","_x10","setActiveFilters","_setActiveFilters","_callee9","newFilters","_args9","_context9","undefined","getCurrentPopupProduct","setCurrentPopupProduct","PopupItem","product","state","currentProductID","_useState","useState","_useState2","_slicedToArray","isAddable","setIsAddable","useEffect","_ref2","_","_jsxs","className","children","_jsx","src","alt","disabled","onClick","type","xmlns","viewBox","focusable","d","PopupSearch","allProducts","search","setSearch","_useState3","_useState4","subscribe","found","toLowerCase","includes","style","width","height","fillRule","clipRule","placeholder","aria-label","onChange","target","PopupCustom","close","setAllProducts","aria-hidden","fill","map","ProductItem","props","rel","enabled","inStock","Popup","modal","onOpen","trigger","position","data-upsell-products","React","Fragment","_product","event","preventDefault","$item","document","querySelector","display","Placeholder","highlightColor","count","Math","floor","random","NoProductsFound","Products","setUpsell","x","Search","productsStored","selectedValues","Filter","_upsellProducts","setUpsellProducts","Select","multi","contentRenderer","alignItems","marginRight","values","filters","update","HomepageSettings","setIsEnabled","checked","data-on","data-off","App","setStoreData","_useState5","_useState6","initiated","setInitiated","initDatabaseOnFirstInstall","initial","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.0134dcfd.chunk.js","sourcesContent":["export const defaultSettings = {\r\n  isEnabled: true,\r\n};\r\n\r\nexport function getProductURLHref(productID) {\r\n  const id = /localhost/.test(window.location.href)\r\n    ? \"37374877\"\r\n    : window.EcwidApp.getPayload().store_id;\r\n\r\n  const url = `https://my.ecwid.com/store/${id}#product:mode=edit&id=${productID}`;\r\n\r\n  return url;\r\n}\r\n\r\nexport const availableFilters = [\r\n  {\r\n    value: \"show_products_with_upsell\",\r\n    label: \"Show only products with upsells\",\r\n  },\r\n  /* TODO - alphabetical order, recently added, hide disabled */\r\n];\r\n\r\nexport function sleep(ms) {\r\n  return new Promise((resolve) => setTimeout(resolve, ms));\r\n}\r\n\r\nexport function findEqualById(arr1, arr2) {\r\n  try {\r\n    return arr1.filter((obj1) => arr2.some((obj2) => obj2.id === obj1.id));\r\n  } catch (err) {\r\n    return [];\r\n  }\r\n}\r\n\r\nexport function overwriteById(arr, newObj) {\r\n  try {\r\n    const updatedArray = arr.map((obj) =>\r\n      obj.id === newObj.id ? newObj : obj,\r\n    );\r\n    return updatedArray;\r\n  } catch (err) {\r\n    return [];\r\n  }\r\n}\r\n\r\n/* Returns object of new visible products */\r\nexport function applyFiltersOnProducts(\r\n  visibleProducts,\r\n  upsellProducts,\r\n  activeFilters,\r\n) {\r\n  if (!activeFilters || activeFilters.length <= 0) {\r\n    return visibleProducts;\r\n  }\r\n\r\n  var products = JSON.parse(JSON.stringify(visibleProducts));\r\n\r\n  for (var each of activeFilters) {\r\n    if (each.value === \"show_products_with_upsell\") {\r\n      console.log(\"apply upd - products\", products, upsellProducts);\r\n\r\n      var filtered = findEqualById(products.items, upsellProducts);\r\n\r\n      console.log(\"apply - filtered\", filtered);\r\n      products.items = filtered;\r\n\r\n      return products;\r\n    }\r\n  }\r\n}\r\n\r\n/*\r\nCleans the bundle products removing all unnecessary properties. \r\n\r\nRequires an object like this:\r\n\r\n[\r\n    {\r\n    \"id\": 123,\r\n    \"bundle\": [\r\n            {\r\n            \"id\": 109109109,\r\n            sku: sdiasjdkajs\r\n            },\r\n            {\r\n            \"id\": 111,\r\n            sku: xxx\r\n            }\r\n        ]\r\n    }\r\n]\r\n*/\r\nexport function sanitizeBundleProducts(productWithBundles) {\r\n  console.log(\"within sanitze: \", productWithBundles);\r\n\r\n  let totalOptions = (upsell) => {\r\n    if (upsell.hasOwnProperty(\"options\")) {\r\n      return upsell.options.length;\r\n    }\r\n\r\n    if (upsell.hasOwnProperty(\"totalOptions\")) {\r\n      return upsell.totalOptions;\r\n    }\r\n\r\n    return 0;\r\n  };\r\n\r\n  var result = [];\r\n\r\n  for (var each of productWithBundles) {\r\n    var parentID = each.id;\r\n    var bundle = [];\r\n\r\n    for (var upsell of each.bundle) {\r\n      console.log(\"my upsell\", upsell);\r\n\r\n      bundle.push({\r\n        id: upsell.id,\r\n        name: upsell.name,\r\n        thumbnailUrl: upsell.thumbnailUrl,\r\n        defaultDisplayedPriceFormatted: upsell.defaultDisplayedPriceFormatted,\r\n        compareToPriceDiscountFormatted: upsell.compareToPriceDiscountFormatted,\r\n        compareToPriceFormatted: upsell.compareToPriceFormatted,\r\n        url: upsell.url,\r\n        totalOptions: totalOptions(upsell),\r\n      });\r\n    }\r\n\r\n    result.push({\r\n      id: parentID,\r\n      bundle,\r\n    });\r\n  }\r\n\r\n  console.log(\"cleaning: \", result);\r\n\r\n  return result;\r\n}\r\n","import create from \"zustand\";\r\nimport axios from \"axios\";\r\nimport {\r\n  defaultSettings,\r\n  overwriteById,\r\n  sanitizeBundleProducts,\r\n} from \"../utils\";\r\n\r\nimport { subscribeWithSelector } from \"zustand/middleware\";\r\n\r\nconst localURL = /localhost/.test(window.location.href)\r\n  ? /* local dev */\r\n    `https://app.ecwid.com/api/v3/37374877/products?token=${process.env.REACT_APP_TOKEN}`\r\n  : /* production */\r\n    `https://app.ecwid.com/api/v3/${\r\n      window.EcwidApp.getPayload().store_id\r\n    }/products?token=${window.EcwidApp.getPayload().access_token}`;\r\n\r\n// const localURL = `https://app.ecwid.com/api/v3/${\r\n//   window.EcwidApp.getPayload().store_id\r\n// }/products?token=${window.EcwidApp.getPayload().access_token}`;\r\n\r\nconst useStore = create(\r\n  subscribeWithSelector((set, get) => ({\r\n    /* ## API PRODUCTS\r\n    ==================================== */\r\n\r\n    /* ===============\r\n    App settings */\r\n    settings: defaultSettings,\r\n\r\n    /* ===============\r\n    All products on the store */\r\n    products: [],\r\n\r\n    /* ===============\r\n    Products that are being searched/currently visible. */\r\n    visibleProducts: [],\r\n\r\n    /* ===============\r\n    Products that are being searched/currently visible within a popup */\r\n    popupVisibleProducts: [],\r\n\r\n    /* ===============\r\n    All filters to visualize products */\r\n    activeFilters: [],\r\n\r\n    /* ===============\r\n    Get store's products and add them to the store's 'products' variable */\r\n    populateProducts: async () => {\r\n      const url = localURL;\r\n\r\n      const { data: products } = await axios.get(url);\r\n\r\n      set({\r\n        products,\r\n        visibleProducts: products,\r\n      });\r\n    },\r\n\r\n    /* ===============\r\n    Update store's products. Typically used for search */\r\n    updateVisibleProducts: async (products) => {\r\n      set({\r\n        visibleProducts: products,\r\n      });\r\n    },\r\n\r\n    /* ===============\r\n    Update popup visible products. Typically used for search */\r\n    updatePopupVisibleProducts: async (products) => {\r\n      set({\r\n        popupVisibleProducts: products,\r\n      });\r\n    },\r\n\r\n    /* Get a product from the customer's catalog by ID API  */\r\n    getProductById: (id) => {\r\n      return get().products.items.filter((e) => e.id === parseInt(id))[0];\r\n    },\r\n\r\n    /* ## UPSELL PRODUCTS\r\n    ==================================== */\r\n\r\n    /* Get Bundle products that will show up at the front-end. */\r\n    upsellProducts: () => {\r\n      if (window.EcwidApp && window.EcwidApp.getPayload()) {\r\n        return new Promise(async (resolve, reject) => {\r\n          console.log(\"before: \", window.upsellProducts);\r\n\r\n          if (window.hasOwnProperty(\"upsellProducts\")) {\r\n            resolve(window.upsellProducts);\r\n            return;\r\n          } else {\r\n            console.log(\"upsell prods not found\", window.upsellProducts);\r\n            let data = [];\r\n\r\n            window.EcwidApp.getAppPublicConfig(function (value) {\r\n              const _data = JSON.parse(value);\r\n              data = data = _data.upsellProducts;\r\n\r\n              if (!data) {\r\n                window.upsellProducts = [];\r\n                resolve([]);\r\n                return;\r\n              }\r\n\r\n              console.log(\r\n                \"xxx 33ECWID DB DATA\",\r\n                _data,\r\n                data,\r\n                window.upsellProducts,\r\n              );\r\n\r\n              window.upsellProducts = data;\r\n              resolve(data);\r\n\r\n              set({\r\n                upsellProducts: data,\r\n              });\r\n\r\n              return;\r\n            });\r\n          }\r\n        });\r\n      }\r\n\r\n      return [];\r\n    },\r\n\r\n    setStoreUpsellProducts: (data) => {\r\n      console.log(\"data: \", data);\r\n      set({\r\n        upsellProducts: data,\r\n      });\r\n    },\r\n\r\n    /* Adds a product to the upsell */\r\n    addUpsellProduct: async (parentID, bundleID) => {\r\n      let bundle;\r\n      let bundleProducts =\r\n        typeof get().upsellProducts === \"function\"\r\n          ? await get().upsellProducts()\r\n          : await get().upsellProducts;\r\n\r\n      const _parentProduct =\r\n        bundleProducts.length >= 1 &&\r\n        bundleProducts.filter((e) => e.id === parentID);\r\n\r\n      let parentProduct = _parentProduct.length >= 1 ? _parentProduct[0] : null;\r\n\r\n      /* Adds parent to bundle to show it up on front-end later on */\r\n      const parent = get().getProductById(parentID);\r\n\r\n      const bundleProduct = get().getProductById(bundleID);\r\n\r\n      /* If it's an already existing product, adds the extra bundle to it */\r\n      if (parentProduct) {\r\n        const existingBundles = () => {\r\n          const _existing = parentProduct.bundle;\r\n\r\n          if (Symbol.iterator in Object(_existing)) {\r\n            return [..._existing];\r\n          }\r\n\r\n          return [_existing];\r\n        };\r\n\r\n        bundle = [...existingBundles(), bundleProduct];\r\n\r\n        bundleProducts = bundleProducts.filter((e) => e.id !== parentID);\r\n\r\n        console.log(bundleProducts);\r\n      }\r\n\r\n      /* In this \"one-line-if-else\", if the product is having a bundle for the first time,\r\n      it is added to the last line, adding both the parent and the first bundle. ([parent, bundleProduct]) */\r\n      const currentProduct = {\r\n        id: parentID,\r\n        bundle:\r\n          bundle && bundle.length >= 1\r\n            ? [...new Set(bundle)]\r\n            : [parent, bundleProduct],\r\n      };\r\n\r\n      const _bundle =\r\n        Symbol.iterator in Object(bundleProducts) ? [...bundleProducts] : [];\r\n\r\n      const _updated = [..._bundle, currentProduct];\r\n      const updated = sanitizeBundleProducts(_updated);\r\n\r\n      console.log(\"updated -- \", updated);\r\n\r\n      /* Save into Ecwid's database */\r\n      if (window.EcwidApp) {\r\n        const settings = await get().settings;\r\n\r\n        try {\r\n          const payload = JSON.stringify({ settings, upsellProducts: updated });\r\n\r\n          console.log(\"payload: \", { upsellProducts: updated });\r\n\r\n          window.EcwidApp.setAppPublicConfig(payload, function () {\r\n            console.log(\"New upsell product saved!\");\r\n          });\r\n        } catch (err) {\r\n          console.error(\r\n            \"Couldn't save upsell product. [store.js - addUpsellProduct()]\",\r\n          );\r\n        }\r\n      }\r\n\r\n      console.log(\"updated: \", updated);\r\n\r\n      set({\r\n        upsellProducts: updated,\r\n      });\r\n    },\r\n\r\n    /* Get the bundle/upsell products of a specific product ID */\r\n    getUpsellProductById: async (id) => {\r\n      let bundleProducts =\r\n        typeof get().upsellProducts === \"function\"\r\n          ? await get().upsellProducts()\r\n          : await get().upsellProducts;\r\n\r\n      const upsell = bundleProducts.filter((e) => e.id === id);\r\n\r\n      const res = upsell.length >= 1 ? upsell[0].bundle : [];\r\n      console.log(\"Bundle products:\", upsell, bundleProducts, id, res);\r\n      return res;\r\n    },\r\n\r\n    deleteUpsellProductById: async (parentID, bundleID) => {\r\n      let bundleProducts =\r\n        typeof get().upsellProducts === \"function\"\r\n          ? await get().upsellProducts()\r\n          : await get().upsellProducts;\r\n\r\n      let updated = [];\r\n\r\n      const parent = bundleProducts.find((e) => e.id === parentID);\r\n\r\n      if (!parent) {\r\n        console.log(\"parent is undefined!!!\");\r\n        return;\r\n      }\r\n\r\n      console.log(\"deleted bundle from parent: \", parent, parentID, bundleID);\r\n      const updatedBundle = parent.bundle.filter((e) => e.id !== bundleID);\r\n\r\n      /* If deleting the last item, remove parent as well.\r\n    We use the number \"1\" because we always add the parent as an upsell. */\r\n      if (updatedBundle.length <= 1) {\r\n        updated = bundleProducts.filter((e) => e.id !== parentID);\r\n      } else {\r\n        updated = bundleProducts;\r\n      }\r\n\r\n      parent.bundle = updatedBundle;\r\n\r\n      console.log(\"Updated after delete: \", updated);\r\n\r\n      if (window.EcwidApp) {\r\n        const settings = await get().settings;\r\n\r\n        try {\r\n          window.EcwidApp.setAppPublicConfig(\r\n            JSON.stringify({ settings, upsellProducts: updated }),\r\n            function () {\r\n              console.log(\"Public config saved!\");\r\n            },\r\n          );\r\n\r\n          console.log(\"Saved upsell products in Database\");\r\n        } catch (err) {}\r\n      }\r\n\r\n      set({\r\n        upsellProducts: updated,\r\n      });\r\n    },\r\n\r\n    setSettings: async (settings) => {\r\n      if (!settings) {\r\n        throw new Error(\"no settings object\");\r\n      }\r\n\r\n      const upsellProducts =\r\n        typeof get().upsellProducts === \"function\"\r\n          ? await get().upsellProducts()\r\n          : await get().upsellProducts;\r\n\r\n      if (window.EcwidApp) {\r\n        try {\r\n          const payload = { settings, upsellProducts };\r\n\r\n          window.EcwidApp.setAppPublicConfig(\r\n            JSON.stringify(payload),\r\n            function (e) {\r\n              console.log(\"Public config saved. Payload: \", payload);\r\n            },\r\n          );\r\n\r\n          console.log(\"Saved settings in Database\");\r\n        } catch (err) {}\r\n      }\r\n\r\n      set({\r\n        settings,\r\n      });\r\n    },\r\n\r\n    setActiveFilters: async (newFilters = null) => {\r\n      if (!newFilters) {\r\n        return;\r\n      }\r\n\r\n      console.log(newFilters);\r\n\r\n      set({\r\n        activeFilters: newFilters,\r\n      });\r\n    },\r\n\r\n    /* ## POPUP PRODUCTS\r\n    ==================================== */\r\n\r\n    /* Get current product being edited in the Popup. */\r\n    getCurrentPopupProduct: undefined,\r\n\r\n    /* Updates current product being edited in the popup. */\r\n    setCurrentPopupProduct: (id) => {\r\n      set({\r\n        getCurrentPopupProduct: id,\r\n      });\r\n    },\r\n  })),\r\n);\r\n\r\nexport { useStore };\r\n","import React, { useRef, useState, useEffect } from \"react\";\r\nimport { useStore } from \"./store/store\";\r\nimport \"./PopupItem.scss\";\r\n\r\nexport default function PopupItem({ product, parentID }) {\r\n  const addUpsellProduct = useStore((state) => state.addUpsellProduct);\r\n\r\n  const currentProductID = useStore((state) => state.getCurrentPopupProduct);\r\n  const getUpsellProductById = useStore((state) => state.getUpsellProductById);\r\n  const getCurrentPopupProduct = useStore(\r\n    (state) => state.getCurrentPopupProduct,\r\n  );\r\n\r\n  const [isAddable, setIsAddable] = useState(true);\r\n\r\n  const addBundleProduct = (id) => {\r\n    addUpsellProduct(currentProductID, id);\r\n\r\n    setIsAddable(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    (async (_) => {\r\n      const upsell = await getUpsellProductById(parentID);\r\n\r\n      if (upsell.filter((e) => e.id === product.id).length >= 1) {\r\n        setIsAddable(false);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"PopupItem  list-element list-element--compact list-element--has-hover list-element--inline-mode\">\r\n      <figure className=\"list-element__image PopupItem-figure\">\r\n        <img src={product.thumbnailUrl} alt={product.name} />\r\n      </figure>\r\n\r\n      <div className=\"list-element__content\">\r\n        <div className=\"list-element__info\">\r\n          <div className=\"list-element__header\">\r\n            <div className=\"list-element__main-info\">\r\n              <div className=\"PopupItem-product-name list-element__title\">\r\n                <span>{product.name}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <button\r\n        disabled={isAddable ? false : true}\r\n        onClick={(_) => addBundleProduct(product.id)}\r\n        type=\"button\"\r\n        className=\"btn btn-small btn-primary\">\r\n        <span className=\"svg-icon\">\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            viewBox=\"0 0 12 12\"\r\n            focusable=\"false\">\r\n            <path d=\"M6.712 5.314H11v1.39H6.712V11H5.267V6.706H1V5.314h4.267V1h1.446v4.314z\"></path>\r\n          </svg>\r\n        </span>\r\n        <span className=\"PopupItem-button-text gwt-InlineLabel\">\r\n          {isAddable ? \"Add\" : \"Added\"}\r\n        </span>\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport \"reactjs-popup/dist/index.css\";\r\nimport PopupCustom from \"./PopupCustom\";\r\nimport \"./PopupSearch.scss\";\r\nimport { useStore } from \"./store/store\";\r\n\r\nimport Products from \"./Products\";\r\n\r\nexport default function PopupSearch({ allProducts }) {\r\n  const [search, setSearch] = useState(\"\");\r\n  const [products, setProducts] = useState([]);\r\n\r\n  let productsStored = false;\r\n\r\n  const updatePopupVisibleProducts = useStore(\r\n    (state) => state.updatePopupVisibleProducts,\r\n  );\r\n  const popupVisibleProducts = useStore((state) => state.popupVisibleProducts);\r\n\r\n  const databaseProducts = useStore((state) => state.products);\r\n\r\n  useEffect(() => {\r\n    useStore.subscribe(\r\n      (state) => state.popupVisibleProducts,\r\n      (e) => {\r\n        console.log(\"prods\", e);\r\n      },\r\n    );\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(\"popup search all produs\", allProducts, search.length);\r\n\r\n    if (search.length <= 0) {\r\n      updatePopupVisibleProducts(allProducts);\r\n      return;\r\n    }\r\n\r\n    const found = allProducts.items.filter((e) => {\r\n      if (e.name.toLowerCase().includes(search.toLowerCase())) {\r\n        return e;\r\n      }\r\n\r\n      return null;\r\n    });\r\n\r\n    console.log(\"res: \", found);\r\n\r\n    const res = JSON.parse(JSON.stringify(popupVisibleProducts));\r\n    res.items = found;\r\n\r\n    console.log(res);\r\n\r\n    updatePopupVisibleProducts(res);\r\n  }, [search]);\r\n\r\n  return (\r\n    <div className=\"PopupSearch\">\r\n      <div className=\"field field--medium\">\r\n        <span className=\"fieldset__svg-icon\" style={{}}>\r\n          <svg\r\n            width={18}\r\n            height={18}\r\n            viewBox=\"0 0 18 18\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            focusable=\"false\">\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              clipRule=\"evenodd\"\r\n              d=\"M18 7c0 3.866-3.134 7-7 7-1.5724 0-3.0236-.5184-4.1922-1.3936l-4.1007 4.1007c-.3905.3905-1.0237.3905-1.4142 0-.3905-.3906-.3905-1.0237 0-1.4143l4.1007-4.1007C4.5184 10.0236 4 8.5723 4 7c0-3.866 3.134-7 7-7s7 3.134 7 7zm-2 0c0 2.7614-2.2386 5-5 5S6 9.7614 6 7s2.2386-5 5-5 5 2.2386 5 5z\"\r\n            />\r\n          </svg>\r\n        </span>{\" \"}\r\n        <input\r\n          value={search}\r\n          type=\"text\"\r\n          className=\"field__input\"\r\n          id=\"gwt-uid-3188\"\r\n          placeholder=\"Search product\"\r\n          aria-label=\"Search product\"\r\n          onChange={(e) => setSearch(e.target.value)}\r\n        />{\" \"}\r\n        <span className=\"field-state--success\">\r\n          <svg\r\n            width={18}\r\n            height={18}\r\n            viewBox=\"0 0 18 18\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            focusable=\"false\">\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              clipRule=\"evenodd\"\r\n              d=\"M16.6508 2.7408c.4193.3594.4679.9907.1085 1.41l-9 10.5c-.3791.4423-1.0545.4682-1.4664.0563l-5-5c-.3905-.3905-.3905-1.0237 0-1.4142.3905-.3905 1.0237-.3905 1.4142 0l4.2364 4.2364 8.2972-9.68c.3595-.4194.9908-.468 1.4101-.1085z\"\r\n            />\r\n          </svg>\r\n        </span>{\" \"}\r\n        <span className=\"field-state--close\">\r\n          <svg\r\n            width={18}\r\n            height={18}\r\n            viewBox=\"0 0 18 18\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            focusable=\"false\">\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              clipRule=\"evenodd\"\r\n              d=\"M1.7929 1.7929c.3905-.3905 1.0237-.3905 1.4142 0L9 7.5858l5.7929-5.793c.3905-.3904 1.0237-.3904 1.4142 0 .3905.3906.3905 1.0238 0 1.4143L10.4142 9l5.7929 5.7929c.3905.3905.3905 1.0237 0 1.4142-.3905.3905-1.0237.3905-1.4142 0L9 10.4142l-5.7929 5.7929c-.3905.3905-1.0237.3905-1.4142 0-.3905-.3905-.3905-1.0237 0-1.4142L7.5858 9l-5.793-5.7929c-.3904-.3905-.3904-1.0237 0-1.4142z\"\r\n            />\r\n          </svg>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport PopupItem from \"./PopupItem\";\r\n\r\nimport \"./PopupCustom.scss\";\r\nimport { useStore } from \"./store/store\";\r\nimport PopupSearch from \"./PopupSearch\";\r\n\r\nexport default function PopupCustom({ parentID, close }) {\r\n  const products = useStore((state) => state.products);\r\n  const popupVisibleProducts = useStore((state) => state.popupVisibleProducts);\r\n  const updatePopupVisibleProducts = useStore(\r\n    (state) => state.updatePopupVisibleProducts,\r\n  );\r\n  const [allProducts, setAllProducts] = useState([]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"updating popups visible\", products);\r\n    const filtered = JSON.parse(JSON.stringify(products));\r\n    filtered.items = products.items.filter((e) => e.id !== parentID);\r\n    updatePopupVisibleProducts(filtered);\r\n    setAllProducts(filtered);\r\n    useStore.subscribe(\r\n      (state) => state.popupVisibleProducts,\r\n      (e) => {\r\n        console.log(\"wihtn subscribe\", e);\r\n      },\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"PopupCustom\">\r\n      <button className=\"PopupCustom-close\" onClick={close}>\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          aria-hidden=\"true\"\r\n          focusable=\"false\"\r\n          className=\"icon icon-close\"\r\n          fill=\"none\"\r\n          viewBox=\"0 0 18 17\">\r\n          <path\r\n            d=\"M.865 15.978a.5.5 0 00.707.707l7.433-7.431 7.579 7.282a.501.501 0 00.846-.37.5.5 0 00-.153-.351L9.712 8.546l7.417-7.416a.5.5 0 10-.707-.708L8.991 7.853 1.413.573a.5.5 0 10-.693.72l7.563 7.268-7.418 7.417z\"\r\n            fill=\"currentColor\"\r\n          />\r\n        </svg>\r\n      </button>\r\n\r\n      <div className=\"a-card__paddings\">\r\n        <h3 className=\"PopupCustom-title\">Products to upsell:</h3>\r\n      </div>\r\n      <PopupSearch allProducts={allProducts}></PopupSearch>\r\n      <div className=\"PopupCustom-products\">\r\n        {popupVisibleProducts &&\r\n          popupVisibleProducts.hasOwnProperty(`items`) &&\r\n          popupVisibleProducts.items.length >= 1 &&\r\n          popupVisibleProducts.items.map((e) => {\r\n            return (\r\n              <PopupItem parentID={parentID} key={e.id} product={e}></PopupItem>\r\n            );\r\n          })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport Popup from \"reactjs-popup\";\r\nimport \"reactjs-popup/dist/index.css\";\r\nimport PopupCustom from \"./PopupCustom\";\r\nimport \"./ProductItem.scss\";\r\nimport { useStore } from \"./store/store\";\r\n\r\nimport Products from \"./Products\";\r\nimport { getProductURLHref } from \"./utils\";\r\n\r\nexport default function ProductItem(props) {\r\n  const { product, upsell } = props;\r\n  // const [upsell, setUpsell] = useState([]);\r\n\r\n  const getUpsellProductById = useStore((state) => state.getUpsellProductById);\r\n  const deleteUpsellProductById = useStore(\r\n    (state) => state.deleteUpsellProductById,\r\n  );\r\n\r\n  const getCurrentPopupProduct = useStore(\r\n    (state) => state.getCurrentPopupProduct,\r\n  );\r\n  const getProductById = useStore((state) => state.getProductById);\r\n  const setCurrentPopupProduct = useStore(\r\n    (state) => state.setCurrentPopupProduct,\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (upsell && upsell.length >= 1) {\r\n    }\r\n\r\n    useStore.subscribe(\r\n      (state) => state.upsellProducts,\r\n      (e) => {\r\n        console.log(\"xx update\");\r\n      },\r\n    );\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(\"current popup: \", getCurrentPopupProduct);\r\n  }, [getCurrentPopupProduct]);\r\n\r\n  const setProduct = () => {\r\n    console.log(\"setting current product: \", product.id);\r\n    setCurrentPopupProduct(product.id);\r\n  };\r\n\r\n  return (\r\n    <div className=\"ProductItem list-element list-element--compact list-element--has-hover list-element--inline-mode\">\r\n      <div className=\"ProductItem-top\">\r\n        <a\r\n          className=\"ProductItem-link\"\r\n          href={getProductURLHref(product.id)}\r\n          target=\"_blank\"\r\n          rel=\"noreferrer\">\r\n          <figure className=\"ProductItem-figure list-element__image\">\r\n            <img\r\n              className=\"ProductItem-image\"\r\n              src={product.thumbnailUrl}\r\n              alt={product.name}\r\n            />\r\n          </figure>\r\n          <div className=\"ProductItem-info\">\r\n            <div className=\"ProductItem-info-container ProductItem-info-top\">\r\n              <div className=\"ProductItem-name\">\r\n                <div className=\"list-element__header\">\r\n                  <div className=\"list-element__main-info\">\r\n                    <div className=\"ProductItem-name-text list-element__title\">\r\n                      {product.name}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"ProductItem-price\">\r\n                {product.defaultDisplayedPriceFormatted}\r\n              </div>\r\n            </div>\r\n            <div className=\"ProductItem-info-container\">\r\n              <div className=\"ProductItem-enabled\">\r\n                {product.enabled ? \"Enabled\" : \"Disabled\"}\r\n                {\" and \"}\r\n                {product.inStock ? \"in stock\" : \"out of stock\"}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </a>\r\n\r\n        <Popup\r\n          modal={true}\r\n          onOpen={() => {\r\n            setProduct();\r\n          }}\r\n          trigger={() => {\r\n            return (\r\n              <div className=\"ProductItem-button-wrapper\">\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"ProductItem-button btn btn-small btn-primary\">\r\n                  <span className=\"svg-icon\">\r\n                    <svg\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                      viewBox=\"0 0 12 12\"\r\n                      focusable=\"false\">\r\n                      <path d=\"M6.712 5.314H11v1.39H6.712V11H5.267V6.706H1V5.314h4.267V1h1.446v4.314z\"></path>\r\n                    </svg>\r\n                  </span>\r\n                  <span className=\"ProductItem-button-text gwt-InlineLabel\">\r\n                    Add Upsell Products\r\n                  </span>\r\n                </button>\r\n              </div>\r\n            );\r\n          }}\r\n          position=\"center center\">\r\n          {(close) => (\r\n            <PopupCustom close={close} parentID={product.id}></PopupCustom>\r\n          )}\r\n        </Popup>\r\n      </div>\r\n\r\n      <div className=\"ProductItem-bottom list-element__content\">\r\n        <div className=\"list-element__info\">\r\n          <div\r\n            className=\"list-element__status-row\"\r\n            data-upsell-products={\r\n              upsell.hasOwnProperty(\"bundle\") ? upsell.bundle.length : 0\r\n            }>\r\n            {upsell && upsell.hasOwnProperty(\"bundle\") && (\r\n              <React.Fragment>\r\n                <p className=\"ProductItem-bottom-title\">\r\n                  {/* {upsell.bundle.length - 1}*/} Upsell product(s)\r\n                </p>\r\n                <div className=\"list-element__data-row ProductItem-bottom-wrapper\">\r\n                  {upsell.bundle.map((e) => {\r\n                    const _product = e;\r\n                    /* If the upsell product is the same as the parent, do not add it to the list. */\r\n                    if (_product.id === product.id) {\r\n                      return;\r\n                    }\r\n                    return (\r\n                      <div\r\n                        key={`${_product.id}_${product.id}`}\r\n                        className={`ProductItem-upsell ProductItem-upsell--${_product.id}-${product.id}`}>\r\n                        <figure className=\"ProductItem-upsell-figure\">\r\n                          <img\r\n                            className=\"ProductItem-upsell-image\"\r\n                            src={_product.thumbnailUrl}\r\n                            alt=\"\"\r\n                          />\r\n                        </figure>\r\n                        <div className=\"ProductItem-upsell-info\">\r\n                          <span className=\"ProductItem-title spacing--mr1\">\r\n                            {_product.name}\r\n                          </span>\r\n\r\n                          {/* <span className=\"ProductItem-price spacing--mr1\">\r\n                            $0.00\r\n                          </span> */}\r\n                        </div>\r\n                        <button\r\n                          className=\"ProductItem-delete icolink\"\r\n                          onClick={(event) => {\r\n                            event.preventDefault();\r\n                            console.log(\r\n                              `Delete ${_product.id} from the parent ${product.id}`,\r\n                            );\r\n                            deleteUpsellProductById(product.id, _product.id);\r\n                            try {\r\n                              const $item = window.document.querySelector(\r\n                                `.ProductItem-upsell--${_product.id}-${product.id}`,\r\n                              );\r\n                              if ($item) {\r\n                                $item.style.display = \"none\";\r\n                              }\r\n                            } catch (err) {\r\n                              console.log(\"Removing error\", err);\r\n                            }\r\n                          }}>\r\n                          <svg\r\n                            width={18}\r\n                            height={18}\r\n                            viewBox=\"0 0 18 18\"\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                            focusable=\"false\">\r\n                            <path d=\"M7 0h4l1 2H6l1-2z\" />\r\n                            <path\r\n                              fillRule=\"evenodd\"\r\n                              clipRule=\"evenodd\"\r\n                              d=\"M2 3c-.5523 0-1 .4477-1 1s.4477 1 1 1v11c0 1.1046.8954 2 2 2h10c1.1046 0 2-.8954 2-2V5c.5523 0 1-.4477 1-1s-.4477-1-1-1H2zm12 13V5H4v11h10z\"\r\n                            />\r\n                            <path d=\"M6 7.5c0-.5523.4477-1 1-1s1 .4477 1 1v6c0 .5523-.4477 1-1 1s-1-.4477-1-1v-6zM10 7.5c0-.5523.4477-1 1-1s1 .4477 1 1v6c0 .5523-.4477 1-1 1s-1-.4477-1-1v-6z\" />\r\n                          </svg>\r\n                        </button>\r\n                      </div>\r\n                    );\r\n                  })}{\" \"}\r\n                </div>\r\n              </React.Fragment>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import Skeleton from \"react-loading-skeleton\";\r\nimport \"./Placeholder.scss\";\r\n\r\nexport const Placeholder = () => {\r\n  return (\r\n    <div className=\"Placeholder\">\r\n      <div className=\"Placeholder-item\">\r\n        <Skeleton\r\n          className=\"Placeholder-image\"\r\n          highlightColor={\"#ff0000\"}\r\n          count={1}\r\n        />\r\n\r\n        <Skeleton\r\n          className=\"Placeholder-title\"\r\n          highlightColor={\"#ff0000\"}\r\n          width={Math.floor(Math.random() * (300 - 150 + 1) + 150)}\r\n          count={1}\r\n        />\r\n\r\n        <Skeleton\r\n          className=\"Placeholder-button\"\r\n          highlightColor={\"#ff0000\"}\r\n          count={1}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"Placeholder-item\">\r\n        <Skeleton\r\n          className=\"Placeholder-image\"\r\n          highlightColor={\"#ff0000\"}\r\n          count={1}\r\n        />\r\n\r\n        <Skeleton\r\n          className=\"Placeholder-title\"\r\n          highlightColor={\"#ff0000\"}\r\n          width={Math.floor(Math.random() * (300 - 150 + 1) + 150)}\r\n          count={1}\r\n        />\r\n\r\n        <Skeleton\r\n          className=\"Placeholder-button\"\r\n          highlightColor={\"#ff0000\"}\r\n          count={1}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"Placeholder-item\">\r\n        <Skeleton\r\n          className=\"Placeholder-image\"\r\n          highlightColor={\"#ff0000\"}\r\n          count={1}\r\n        />\r\n\r\n        <Skeleton\r\n          className=\"Placeholder-title\"\r\n          highlightColor={\"#ff0000\"}\r\n          width={Math.floor(Math.random() * (300 - 150 + 1) + 150)}\r\n          count={1}\r\n        />\r\n\r\n        <Skeleton\r\n          className=\"Placeholder-button\"\r\n          highlightColor={\"#ff0000\"}\r\n          count={1}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport \"./NoProductsFound.scss\";\r\n\r\nexport default function NoProductsFound() {\r\n  return (\r\n    <div className=\"NoProductsFound\">\r\n      {\" \"}\r\n      <h3>No products found.</h3>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport \"./Products.scss\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\nimport ProductPicker from \"./ProductPicker\";\r\nimport ProductItem from \"./ProductItem\";\r\nimport { useStore } from \"./store/store\";\r\nimport { Placeholder } from \"./Placeholder\";\r\nimport NoProductsFound from \"./NoProductsFound\";\r\n\r\nexport default function Products({ upsellProducts }) {\r\n  const populateProducts = useStore((state) => state.populateProducts);\r\n  const products = useStore((state) => state.visibleProducts);\r\n\r\n  const [upsell, setUpsell] = useState(upsellProducts);\r\n\r\n  useEffect(() => {\r\n    populateProducts();\r\n\r\n    console.log(\"total prods\", products);\r\n\r\n    useStore.subscribe(\r\n      (state) => state.upsellProducts,\r\n      (e) => {\r\n        setUpsell(e);\r\n        console.log(\"visible upsells updated, let's upd!\", e);\r\n      },\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"Products  named-area\">\r\n      <div className=\"Products-items\">\r\n        {products &&\r\n        products.hasOwnProperty(\"items\") &&\r\n        products.items.length <= 0 ? (\r\n          <NoProductsFound />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        {products && products.hasOwnProperty(\"items\") ? (\r\n          products.items.map((e) => (\r\n            <ProductItem\r\n              key={e.id}\r\n              product={e}\r\n              upsell={\r\n                upsell.filter((x) => x.id === e.id).length >= 1\r\n                  ? upsell.filter((x) => x.id === e.id)[0]\r\n                  : []\r\n              }></ProductItem>\r\n          ))\r\n        ) : (\r\n          <Placeholder></Placeholder>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport \"reactjs-popup/dist/index.css\";\r\nimport PopupCustom from \"./PopupCustom\";\r\nimport \"./Search.scss\";\r\nimport { useStore } from \"./store/store\";\r\n\r\nimport Products from \"./Products\";\r\nimport { applyFiltersOnProducts } from \"./utils\";\r\n\r\nexport default function Search() {\r\n  const [search, setSearch] = useState(\"\");\r\n  const [allProducts, setAllProducts] = useState([]);\r\n\r\n  let productsStored = false;\r\n\r\n  const updateVisibleProducts = useStore(\r\n    (state) => state.updateVisibleProducts,\r\n  );\r\n  const visibleProducts = useStore((state) => state.visibleProducts);\r\n  const upsellProducts = useStore((state) => state.upsellProducts);\r\n  const activeFilters = useStore((state) => state.activeFilters);\r\n\r\n  useEffect(() => {\r\n    useStore.subscribe(\r\n      (state) => state.products,\r\n      (e) => {\r\n        if (productsStored) {\r\n          return;\r\n        }\r\n\r\n        if (e.hasOwnProperty(\"items\") && e.items.length >= 1) {\r\n          setAllProducts(e);\r\n          console.log(\"SEARCH!!!\", e);\r\n          productsStored = true;\r\n        }\r\n      },\r\n    );\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(\"search\", allProducts);\r\n\r\n    useStore.subscribe(\r\n      (state) => state.activeFilters,\r\n      (e) => {\r\n        setSearch(\"\");\r\n      },\r\n    );\r\n\r\n    if (search.length <= 0) {\r\n      console.log(\"updating all products\", allProducts);\r\n      updateVisibleProducts(allProducts);\r\n    }\r\n\r\n    if (allProducts && allProducts.items && allProducts.items.length >= 1) {\r\n      console.log(activeFilters);\r\n\r\n      let found = allProducts.items.filter((e) => {\r\n        if (e.name.toLowerCase().includes(search.toLowerCase())) {\r\n          return e;\r\n        }\r\n\r\n        return null;\r\n      });\r\n\r\n      /* TODO - BUG \r\n\r\n      can't search for products found i keep typing\r\n      */\r\n\r\n      /* Search again if there are filters */\r\n      if (activeFilters && activeFilters.length >= 1) {\r\n        found = applyFiltersOnProducts(\r\n          allProducts,\r\n          upsellProducts,\r\n          activeFilters,\r\n        ).items.filter((e) => {\r\n          if (e.name.toLowerCase().includes(search.toLowerCase())) {\r\n            return e;\r\n          }\r\n\r\n          return null;\r\n        });\r\n      }\r\n\r\n      console.log(\"searcgable: \", \"filters \", activeFilters);\r\n\r\n      const res = JSON.parse(JSON.stringify(allProducts));\r\n      res.items = found;\r\n\r\n      console.log(res);\r\n\r\n      updateVisibleProducts(res);\r\n    }\r\n  }, [search]);\r\n\r\n  return (\r\n    <div className=\"Search\">\r\n      <div className=\"field field--medium\">\r\n        <span className=\"fieldset__svg-icon\" style={{}}>\r\n          <svg\r\n            width={18}\r\n            height={18}\r\n            viewBox=\"0 0 18 18\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            focusable=\"false\">\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              clipRule=\"evenodd\"\r\n              d=\"M18 7c0 3.866-3.134 7-7 7-1.5724 0-3.0236-.5184-4.1922-1.3936l-4.1007 4.1007c-.3905.3905-1.0237.3905-1.4142 0-.3905-.3906-.3905-1.0237 0-1.4143l4.1007-4.1007C4.5184 10.0236 4 8.5723 4 7c0-3.866 3.134-7 7-7s7 3.134 7 7zm-2 0c0 2.7614-2.2386 5-5 5S6 9.7614 6 7s2.2386-5 5-5 5 2.2386 5 5z\"\r\n            />\r\n          </svg>\r\n        </span>{\" \"}\r\n        <input\r\n          value={search}\r\n          type=\"text\"\r\n          className=\"field__input\"\r\n          id=\"gwt-uid-3188\"\r\n          placeholder=\"Search product\"\r\n          aria-label=\"Search product\"\r\n          onChange={(e) => setSearch(e.target.value)}\r\n        />{\" \"}\r\n        <span className=\"field-state--success\">\r\n          <svg\r\n            width={18}\r\n            height={18}\r\n            viewBox=\"0 0 18 18\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            focusable=\"false\">\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              clipRule=\"evenodd\"\r\n              d=\"M16.6508 2.7408c.4193.3594.4679.9907.1085 1.41l-9 10.5c-.3791.4423-1.0545.4682-1.4664.0563l-5-5c-.3905-.3905-.3905-1.0237 0-1.4142.3905-.3905 1.0237-.3905 1.4142 0l4.2364 4.2364 8.2972-9.68c.3595-.4194.9908-.468 1.4101-.1085z\"\r\n            />\r\n          </svg>\r\n        </span>{\" \"}\r\n        <span className=\"field-state--close\">\r\n          <svg\r\n            width={18}\r\n            height={18}\r\n            viewBox=\"0 0 18 18\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            focusable=\"false\">\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              clipRule=\"evenodd\"\r\n              d=\"M1.7929 1.7929c.3905-.3905 1.0237-.3905 1.4142 0L9 7.5858l5.7929-5.793c.3905-.3904 1.0237-.3904 1.4142 0 .3905.3906.3905 1.0238 0 1.4143L10.4142 9l5.7929 5.7929c.3905.3905.3905 1.0237 0 1.4142-.3905.3905-1.0237.3905-1.4142 0L9 10.4142l-5.7929 5.7929c-.3905.3905-1.0237.3905-1.4142 0-.3905-.3905-.3905-1.0237 0-1.4142L7.5858 9l-5.793-5.7929c-.3904-.3905-.3904-1.0237 0-1.4142z\"\r\n            />\r\n          </svg>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\n\r\nimport Skeleton from \"react-loading-skeleton\";\r\nimport \"./Filter.scss\";\r\nimport Select from \"react-dropdown-select\";\r\nimport { useStore } from \"./store/store\";\r\nimport {\r\n  applyFiltersOnProducts,\r\n  availableFilters,\r\n  convertUpsellProductsToObject,\r\n  findEqualById,\r\n} from \"./utils\";\r\n\r\nconst selectedValues = [];\r\n\r\nexport const Filter = ({ upsellProducts: _upsellProducts }) => {\r\n  const [upsellProducts, setUpsellProducts] = useState([]);\r\n\r\n  // const storeUpsellProducts = useStore((state) => state.upsellProducts);\r\n  const products = useStore((state) => state.products);\r\n  const setActiveFilters = useStore((state) => state.setActiveFilters);\r\n  const visibleProducts = useStore((state) => state.visibleProducts);\r\n  const setStoreUpsellProducts = useStore(\r\n    (state) => state.setStoreUpsellProducts,\r\n  );\r\n  const updateVisibleProducts = useStore(\r\n    (state) => state.updateVisibleProducts,\r\n  );\r\n\r\n  useEffect(() => {\r\n    useStore.subscribe(\r\n      (state) => state.upsellProducts,\r\n      (e) => {\r\n        console.log(\"upsell products update from app!\", e);\r\n        setUpsellProducts(e);\r\n      },\r\n    );\r\n\r\n    setUpsellProducts(_upsellProducts);\r\n    setStoreUpsellProducts(_upsellProducts);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(\"my upsell prods\", upsellProducts);\r\n  }, [upsellProducts]);\r\n\r\n  return (\r\n    <div className=\"Filter\">\r\n      <Select\r\n        options={availableFilters}\r\n        placeholder={\"Filter\"}\r\n        multi\r\n        contentRenderer={({ props, state }) => {\r\n          return (\r\n            <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n              <b style={{ marginRight: 5 }}>{state.values.length}</b> Filter\r\n              {state.values.length !== 1 ? \"s\" : \"\"}\r\n            </div>\r\n          );\r\n        }}\r\n        values={availableFilters.filter((data) =>\r\n          selectedValues.includes(data.label),\r\n        )}\r\n        onChange={(filters) => {\r\n          if (filters.length <= 0) {\r\n            console.log(\"all prods\", products);\r\n            updateVisibleProducts(products);\r\n            setActiveFilters([]);\r\n            return;\r\n          }\r\n\r\n          console.log(\"NEW CODE filters aand upsell\", filters, upsellProducts);\r\n          setActiveFilters(filters);\r\n\r\n          const update = applyFiltersOnProducts(\r\n            visibleProducts,\r\n            upsellProducts,\r\n            filters,\r\n          );\r\n\r\n          console.log(\r\n            \"filter update\",\r\n            update,\r\n            \"--- visible prods\",\r\n            visibleProducts,\r\n          );\r\n          if (!update) {\r\n            updateVisibleProducts(products);\r\n          }\r\n\r\n          updateVisibleProducts(update);\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport \"./HomepageSettings.scss\";\r\n\r\nimport { useStore } from \"./store/store\";\r\n\r\nexport default function HomepageSettings() {\r\n  const setSettings = useStore((state) => state.setSettings);\r\n  const [isEnabled, setIsEnabled] = useState(false);\r\n  const settings = useStore((state) => state.settings);\r\n\r\n  useEffect(() => {\r\n    setIsEnabled(settings.isEnabled);\r\n  }, [settings]);\r\n\r\n  return (\r\n    <div className=\"HomepageSettings\">\r\n      <div className=\"form-area__content form-area__content--no-margin\">\r\n        <div className=\"text-default\">\r\n          <label className=\"checkbox micro\">\r\n            <input\r\n              name=\"\"\r\n              checked={isEnabled}\r\n              onChange={() => {\r\n                setIsEnabled(!isEnabled);\r\n                setSettings({\r\n                  isEnabled: !isEnabled,\r\n                });\r\n                return;\r\n              }}\r\n              type=\"checkbox\"\r\n            />{\" \"}\r\n            <div\r\n              className=\"HomepageSettings-text\"\r\n              data-on=\"App is visible on storefront\"\r\n              data-off=\"App is not visible on storefront\">\r\n              {\" \"}\r\n              <div />{\" \"}\r\n            </div>\r\n          </label>\r\n        </div>{\" \"}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import \"./App.scss\";\nimport React, { useEffect, useState } from \"react\";\nimport { useStore } from \"./store/store\";\nimport { shallow } from \"zustand/shallow\";\nimport Products from \"./Products\";\nimport { subscribeWithSelector } from \"zustand/middleware\";\nimport { create } from \"zustand\";\nimport Search from \"./Search\";\nimport { Placeholder } from \"./Placeholder\";\nimport Settings from \"./Settings\";\nimport { defaultSettings } from \"./utils\";\nimport { Filter } from \"./Filter\";\nimport HomepageSettings from \"./HomepageSettings\";\n\nfunction App() {\n  const [storeData, setStoreData] = useState(null);\n  const [upsellProducts, setUpsellProducts] = useState(null);\n  const [initiated, setInitiated] = useState(false);\n\n  const settings = useStore((state) => state.settings);\n  const setSettings = useStore((state) => state.setSettings);\n\n  const getUpsellProducts = useStore((state) => state.upsellProducts);\n\n  function initDatabaseOnFirstInstall(value) {\n    value = JSON.parse(value);\n    let mustInit = false;\n\n    let initial = {};\n\n    try {\n      initial.upsellProducts = value.hasOwnProperty(\"upsellProducts\")\n        ? value.upsellProducts\n        : [];\n    } catch (err) {\n      initial.upsellProducts = [];\n    }\n\n    try {\n      initial.settings = value.hasOwnProperty(\"settings\") ? value.settings : [];\n    } catch (err) {\n      initial.settings = [];\n    }\n\n    console.log(\"!Must create new database? \", mustInit, initial);\n    console.log(\"vaue\", value);\n\n    if (mustInit) {\n      window.EcwidApp.setAppPublicConfig(JSON.stringify(initial), function (e) {\n        console.log(\"Fresh database setup!\", e);\n      });\n    }\n\n    setUpsellProducts(initial.upsellProducts);\n    setSettings(initial.settings);\n\n    setInitiated(true);\n  }\n\n  useEffect(() => {\n    const data = window.EcwidApp.getPayload();\n\n    setStoreData(data);\n\n    useStore.subscribe(\n      (state) => state.upsellProducts,\n      (e) => {\n        console.log(\"upsell products update from app!\", e);\n      },\n    );\n\n    useStore.subscribe(\n      (state) => state.settings,\n      (e) => {\n        console.log(\"settings update from app!\", e);\n      },\n    );\n\n    if (!window.EcwidApp.getPayload()) {\n      /* Used for dev */\n      initDatabaseOnFirstInstall(\n        JSON.stringify({\n          upsellProducts: [],\n          settings: defaultSettings,\n        }),\n      );\n    }\n\n    if (window.EcwidApp && window.EcwidApp.getPayload() && !initiated) {\n      window.EcwidApp.getAppPublicConfig(function (value) {\n        console.log(\"has init?\", initiated, value);\n\n        initDatabaseOnFirstInstall(value);\n      });\n    }\n  }, []);\n\n  return (\n    <div className=\"EasyUpsellApp\">\n      <div className=\"EasyUpsellApp-container\">\n        <div className=\"named-area\">\n          <div className=\"named-area__body\">\n            <div className=\"a-card a-card--compact\">\n              <div className=\"EasyUpsellApp-block a-card__paddings\">\n                <h1 className=\"EasyUpsellApp-title settings-page__title spacing--mt2\">\n                  Checkout Upsell\n                </h1>\n                <HomepageSettings></HomepageSettings>\n                {/* <Settings></Settings> */}\n                <div style={{ display: \"flex\" }}>\n                  {upsellProducts && (\n                    <React.Fragment>\n                      <Filter upsellProducts={upsellProducts}></Filter>\n                      <Search></Search>\n                    </React.Fragment>\n                  )}\n                </div>\n                {upsellProducts ? (\n                  <Products upsellProducts={upsellProducts}></Products>\n                ) : (\n                  <Placeholder></Placeholder>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}