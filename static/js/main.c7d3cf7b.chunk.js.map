{"version":3,"sources":["utils.js","store/store.js","PopupItem.js","PopupCustom.js","ProductItem.js","Products.js","App.js","reportWebVitals.js","index.js"],"names":["sanitizeBundleProducts","productWithBundles","console","log","result","each","parentID","id","bundles","bundle","upsell","push","name","thumbnailUrl","defaultDisplayedPriceFormatted","compareToPriceDiscountFormatted","compareToPriceFormatted","url","useStore","create","set","get","products","populateProducts","a","test","window","location","href","EcwidApp","getPayload","store_id","access_token","axios","data","getProductById","items","filter","e","parseInt","upsellProducts","Promise","resolve","reject","hasOwnProperty","getAppPublicConfig","value","_data","JSON","parse","addUpsellProduct","bundleID","bundleProducts","_parentProduct","length","parentProduct","parent","bundleProduct","existingBundles","_existing","Symbol","iterator","Object","currentProduct","Set","sanitizedBundleProducts","updated","payload","stringify","setAppPublicConfig","err","error","getUpsellProductById","deleteUpsellProductById","find","updatedBundle","getCurrentPopupProduct","undefined","setCurrentPopupProduct","PopupItem","product","state","currentProductID","useState","isAddable","setIsAddable","useEffect","_","className","src","alt","disabled","onClick","type","xmlns","viewBox","focusable","d","PopupCustom","map","ProductItem","props","_product","event","preventDefault","width","height","modal","onOpen","trigger","position","Products","subscribe","previousupsellProducts","x","App","storeData","setStoreData","setUpsellProducts","getUpsellProducts","ProductSkeleton","Fragment","count","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c7d3cf7b.chunk.js","sourcesContent":["/*\r\nCleans the bundle products. Requires an object like this:\r\n\r\n[\r\n    {\r\n    \"id\": 123,\r\n    \"bundle\": [\r\n            {\r\n            \"id\": 109109109,\r\n            sku: sdiasjdkajs\r\n            },\r\n            {\r\n            \"id\": 111,\r\n            sku: xxx\r\n            }\r\n        ]\r\n    }\r\n]\r\n*/\r\n\r\nexport function sanitizeBundleProducts(productWithBundles) {\r\n  console.log(\"within sanitze:  \", productWithBundles);\r\n  var result = [];\r\n\r\n  for (var each of productWithBundles) {\r\n    var parentID = each.id;\r\n    var bundles = [];\r\n\r\n    for (var upsell of each.bundle) {\r\n      bundles.push({\r\n        id: upsell.id,\r\n        name: upsell.name,\r\n        thumbnailUrl: upsell.thumbnailUrl,\r\n        defaultDisplayedPriceFormatted: upsell.defaultDisplayedPriceFormatted,\r\n        compareToPriceDiscountFormatted: upsell.compareToPriceDiscountFormatted,\r\n        compareToPriceFormatted: upsell.compareToPriceFormatted,\r\n        url: upsell.url,\r\n      });\r\n    }\r\n\r\n    result.push({\r\n      id: parentID,\r\n      bundles,\r\n    });\r\n  }\r\n\r\n  console.log(\"cleaning: \", result);\r\n  debugger;\r\n\r\n  return result;\r\n}\r\n","import create from \"zustand\";\r\nimport axios from \"axios\";\r\nimport { sanitizeBundleProducts } from \"../utils\";\r\n\r\nconst useStore = create((set, get) => ({\r\n  /* ## API PRODUCTS\r\n  ==================================== */\r\n  products: [],\r\n\r\n  /* ===============\r\n  Get store's products and add them to the store's 'products' variable */\r\n  populateProducts: async () => {\r\n    /* TODO = change this URL when on production */\r\n\r\n    const url = /localhost/.test(window.location.href)\r\n      ? `https://app.ecwid.com/api/v3/37374877/products?token=secret_EkQGe8SC4V4DHgSrnkmXsQsneDQ9JwQ4`\r\n      : `https://app.ecwid.com/api/v3/${\r\n          window.EcwidApp.getPayload().store_id\r\n        }/products?token=${window.EcwidApp.getPayload().access_token}`;\r\n\r\n    const { data: products } = await axios.get(url);\r\n\r\n    set({\r\n      products,\r\n    });\r\n  },\r\n\r\n  /* Get a product from the customer's catalog by ID API  */\r\n  getProductById: (id) => {\r\n    return get().products.items.filter((e) => e.id === parseInt(id))[0];\r\n  },\r\n\r\n  /* ## UPSELL PRODUCTS\r\n  ==================================== */\r\n\r\n  /* Get Bundle products that will show up at the front-end. */\r\n  upsellProducts: () => {\r\n    if (window.EcwidApp && window.EcwidApp.getPayload()) {\r\n      return new Promise(async (resolve, reject) => {\r\n        console.log(\"before: \", window.upsellProducts);\r\n        if (window.hasOwnProperty(\"upsellProducts\")) {\r\n          resolve(window.upsellProducts);\r\n          return;\r\n        } else {\r\n          console.log(\"upsell prods not found\", window.upsellProducts);\r\n          let data = [];\r\n\r\n          window.EcwidApp.getAppPublicConfig(function (value) {\r\n            const _data = JSON.parse(value);\r\n            // console.log(\"xxx ECWID PRE DATA\", _data);\r\n            data = data = _data.upsellProducts;\r\n            console.log(\"xxx ECWID DB DATA\", data, window.upsellProducts);\r\n\r\n            window.upsellProducts = data;\r\n            resolve(data);\r\n            return;\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    return [];\r\n  },\r\n\r\n  /* Adds a product to the upsell */\r\n  addUpsellProduct: async (parentID, bundleID) => {\r\n    let bundle;\r\n    let bundleProducts =\r\n      typeof get().upsellProducts === \"function\"\r\n        ? await get().upsellProducts()\r\n        : await get().upsellProducts;\r\n\r\n    debugger;\r\n\r\n    const _parentProduct =\r\n      bundleProducts.length >= 1 &&\r\n      bundleProducts.filter((e) => e.id === parentID);\r\n\r\n    let parentProduct = _parentProduct.length >= 1 ? _parentProduct[0] : null;\r\n\r\n    console.log(\r\n      `Adding the bundle product ${bundleID} to ${\r\n        parentProduct ? `parent ${parentProduct.id}` : `new parent.`\r\n      }`,\r\n    );\r\n\r\n    /* Adds parent to bundle to show it up on front-end later on */\r\n    const parent = get().getProductById(parentID);\r\n\r\n    const bundleProduct = get().getProductById(bundleID);\r\n\r\n    console.log(\"Bundle product: \", bundleProduct);\r\n\r\n    /* If it's an already existing product, adds the extra bundle to it */\r\n    if (parentProduct) {\r\n      const existingBundles = () => {\r\n        const _existing = parentProduct.bundle;\r\n\r\n        if (Symbol.iterator in Object(_existing)) {\r\n          return [..._existing];\r\n        }\r\n\r\n        return [_existing];\r\n      };\r\n\r\n      bundle = [...existingBundles(), bundleProduct];\r\n\r\n      console.log(\"the Bundle : \", bundle);\r\n\r\n      bundleProducts = bundleProducts.filter((e) => e.id !== parentID);\r\n\r\n      console.log(bundleProducts);\r\n    }\r\n\r\n    /* In this \"one-line-if-else\", if the product is having a bundle for the first time,\r\n    it is added to the last line, adding both the parent and the first bundle. ([parent, bundleProduct]) */\r\n    const currentProduct = {\r\n      id: parentID,\r\n      bundle:\r\n        bundle && bundle.length >= 1\r\n          ? [...new Set(bundle)]\r\n          : [parent, bundleProduct],\r\n    };\r\n\r\n    const sanitizedBundleProducts = sanitizeBundleProducts(bundleProducts);\r\n\r\n    const updated = [...sanitizedBundleProducts, currentProduct];\r\n\r\n    console.log(\"updated -- \", updated, sanitizedBundleProducts);\r\n\r\n    /* Save into Ecwid's database */\r\n    if (window.EcwidApp) {\r\n      try {\r\n        const payload = JSON.stringify({ upsellProducts: updated });\r\n\r\n        console.log(\"payload: \", updated);\r\n\r\n        window.EcwidApp.setAppPublicConfig(payload, function () {\r\n          console.log(\"New upsell product saved!\");\r\n        });\r\n      } catch (err) {\r\n        console.error(\r\n          \"Couldn't save upsell product. [store.js - addUpsellProduct()]\",\r\n        );\r\n      }\r\n    }\r\n\r\n    console.log(\"updated: \", updated);\r\n\r\n    set({\r\n      upsellProducts: updated,\r\n    });\r\n  },\r\n\r\n  /* Get the bundle/upsell products of a specific product ID */\r\n  getUpsellProductById: async (id) => {\r\n    let bundleProducts =\r\n      typeof get().upsellProducts === \"function\"\r\n        ? await get().upsellProducts()\r\n        : await get().upsellProducts;\r\n\r\n    console.log(bundleProducts);\r\n\r\n    // console.log(\"Bundle products:\", bundleProducts);\r\n\r\n    const upsell = bundleProducts.filter((e) => e.id === id);\r\n    return upsell.length >= 1 ? upsell[0].bundle : [];\r\n  },\r\n\r\n  deleteUpsellProductById: async (parentID, bundleID) => {\r\n    let bundleProducts =\r\n      typeof get().upsellProducts === \"function\"\r\n        ? await get().upsellProducts()\r\n        : await get().upsellProducts;\r\n\r\n    let updated = [];\r\n\r\n    const parent = bundleProducts.find((e) => e.id === parentID);\r\n\r\n    if (!parent) {\r\n      console.log(\"parent is undefined!!!\");\r\n      return;\r\n    }\r\n\r\n    console.log(\"deleted bundle from parent: \", parent, parentID, bundleID);\r\n    const updatedBundle = parent.bundle.filter((e) => e.id !== bundleID);\r\n\r\n    /* If deleting the last item, remove parent as well.\r\n    We use the number \"1\" because we always add the parent as an upsell. */\r\n    if (updatedBundle.length <= 1) {\r\n      updated = bundleProducts.filter((e) => e.id !== parentID);\r\n    } else {\r\n      updated = bundleProducts;\r\n    }\r\n\r\n    parent.bundle = updatedBundle;\r\n\r\n    console.log(\"Updated after delete: \", updated);\r\n\r\n    if (window.EcwidApp) {\r\n      try {\r\n        window.EcwidApp.setAppPublicConfig(\r\n          JSON.stringify({ upsellProducts: updated }),\r\n          function () {\r\n            console.log(\"Public config saved!\");\r\n          },\r\n        );\r\n\r\n        console.log(\"Saved upsell products in Database\");\r\n      } catch (err) {}\r\n    }\r\n\r\n    set({\r\n      upsellProducts: updated,\r\n    });\r\n  },\r\n\r\n  /* ## POPUP PRODUCTS\r\n  ==================================== */\r\n\r\n  /* Get current product being edited in the Popup. */\r\n  getCurrentPopupProduct: undefined,\r\n\r\n  /* Updates current product being edited in the popup. */\r\n  setCurrentPopupProduct: (id) => {\r\n    set({\r\n      getCurrentPopupProduct: id,\r\n    });\r\n  },\r\n}));\r\n\r\nexport default useStore;\r\n","import React, { useRef, useState, useEffect } from \"react\";\r\nimport useStore from \"./store/store\";\r\n\r\nexport default function PopupItem({ product, parentID }) {\r\n  const addUpsellProduct = useStore((state) => state.addUpsellProduct);\r\n\r\n  const currentProductID = useStore((state) => state.getCurrentPopupProduct);\r\n  const getUpsellProductById = useStore((state) => state.getUpsellProductById);\r\n  const getCurrentPopupProduct = useStore(\r\n    (state) => state.getCurrentPopupProduct,\r\n  );\r\n\r\n  const [isAddable, setIsAddable] = useState(true);\r\n\r\n  const addBundleProduct = (id) => {\r\n    addUpsellProduct(currentProductID, id);\r\n    setIsAddable(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    (async (_) => {\r\n      const upsell = await getUpsellProductById(parentID);\r\n\r\n      if (upsell.filter((e) => e.id === product.id).length >= 1) {\r\n        setIsAddable(false);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"PopupItem  list-element list-element--compact list-element--has-hover list-element--inline-mode\">\r\n      <div className=\"list-element__image\">\r\n        <img src={product.thumbnailUrl} alt={product.name} />\r\n      </div>\r\n\r\n      <div className=\"list-element__content\">\r\n        <div className=\"list-element__info\">\r\n          <div className=\"list-element__header\">\r\n            <div className=\"list-element__main-info\">\r\n              <div className=\"list-element__title\">\r\n                <span>{product.name}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <button\r\n        disabled={isAddable ? false : true}\r\n        onClick={(_) => addBundleProduct(product.id)}\r\n        type=\"button\"\r\n        className=\"btn btn-small btn-primary\">\r\n        <span className=\"svg-icon\">\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            viewBox=\"0 0 12 12\"\r\n            focusable=\"false\">\r\n            <path d=\"M6.712 5.314H11v1.39H6.712V11H5.267V6.706H1V5.314h4.267V1h1.446v4.314z\"></path>\r\n          </svg>\r\n        </span>\r\n        <span className=\"gwt-InlineLabel\">{isAddable ? \"Add\" : \"Added\"}</span>\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useRef, useEffect } from \"react\";\r\nimport PopupItem from \"./PopupItem\";\r\n\r\nimport \"./PopupCustom.scss\";\r\nimport useStore from \"./store/store\";\r\n\r\nexport default function PopupCustom({ parentID }) {\r\n  const products = useStore((state) => state.products);\r\n\r\n  return (\r\n    <div className=\"PopupCustom\">\r\n      <div className=\"a-card__paddings\">\r\n        <h3 className=\"PopupCustom-title\">\r\n          Please select the products to upsell:{\" \"}\r\n        </h3>\r\n      </div>\r\n      {products.items.map((e) => {\r\n        if (e.id === parentID) {\r\n          return;\r\n        }\r\n\r\n        return (\r\n          <PopupItem parentID={parentID} key={e.id} product={e}></PopupItem>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport Popup from \"reactjs-popup\";\r\nimport \"reactjs-popup/dist/index.css\";\r\nimport PopupCustom from \"./PopupCustom\";\r\nimport \"./ProductItem.scss\";\r\nimport useStore from \"./store/store\";\r\nimport Products from \"./Products\";\r\n\r\nexport default function ProductItem(props) {\r\n  const { product, upsell } = props;\r\n  // const [upsell, setUpsell] = useState([]);\r\n\r\n  const getUpsellProductById = useStore((state) => state.getUpsellProductById);\r\n  const deleteUpsellProductById = useStore(\r\n    (state) => state.deleteUpsellProductById,\r\n  );\r\n\r\n  const getCurrentPopupProduct = useStore(\r\n    (state) => state.getCurrentPopupProduct,\r\n  );\r\n  const getProductById = useStore((state) => state.getProductById);\r\n  const setCurrentPopupProduct = useStore(\r\n    (state) => state.setCurrentPopupProduct,\r\n  );\r\n\r\n  const populateUpsells = async (id) => {\r\n    // const bundle = await getUpsellProductById(product.id);\r\n    // console.log(\"my ID and  bundle: \", bundle);\r\n    // setUpsell(bundle);\r\n  };\r\n\r\n  const handlePopulateUpsell = async (subscription) => {\r\n    // let bundleProducts = upsellProducts;\r\n    // console.log(\"my bbbb\", bundleProducts(), props);\r\n    // if (bundleProducts && bundleProducts.length <= 0) {\r\n    //   setUpsell([]);\r\n    //   return;\r\n    // }\r\n    // const current = bundleProducts.filter((e) => e.id === product.id)[0];\r\n    // if (!current) {\r\n    //   setUpsell([]);\r\n    //   return;\r\n    // }\r\n    // populateUpsells(product.id);\r\n  };\r\n\r\n  useEffect(() => {\r\n    // (async (_) => {\r\n    //   // handlePopulateUpsell();\r\n    // })();\r\n    // useStore.subscribe(async (e) => {\r\n    //   handlePopulateUpsell(e);\r\n    // });\r\n\r\n    if (upsell.length >= 1) {\r\n      console.log(\"my upsell: \", upsell);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(\"current popup: \", getCurrentPopupProduct);\r\n  }, [getCurrentPopupProduct]);\r\n\r\n  const setProduct = () => {\r\n    console.log(\"setting current product: \", product.id);\r\n    setCurrentPopupProduct(product.id);\r\n  };\r\n\r\n  return (\r\n    <div className=\"ProductItem list-element list-element--compact list-element--has-hover list-element--inline-mode\">\r\n      <div className=\"list-element__image\">\r\n        <img src={product.thumbnailUrl} alt={product.name} />\r\n      </div>\r\n\r\n      <div className=\"list-element__content\">\r\n        <div className=\"list-element__info\">\r\n          <div className=\"list-element__header\">\r\n            <div className=\"list-element__main-info\">\r\n              <div className=\"list-element__title\">\r\n                <span>\r\n                  {product.name} {product.id}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"list-element__status-row\">\r\n            <span className=\"order__date-wrapper ProductItem-subtitle\">\r\n              Upsell Products:\r\n            </span>\r\n            <div className=\"list-element__data-row\">\r\n              {upsell &&\r\n                upsell.length >= 1 &&\r\n                upsell.map((e) => {\r\n                  const _product = e;\r\n\r\n                  /* If the upsell product is the same as the parent, do not add it to the list. */\r\n                  if (_product.id === product.id) {\r\n                    return;\r\n                  }\r\n\r\n                  return (\r\n                    <div\r\n                      key={`${_product.id}_${product.id}`}\r\n                      className={`ProductItem-upsell ProductItem-upsell--${_product.id}-${product.id}`}>\r\n                      <span className=\"spacing--mr1\">{_product.name}</span>\r\n\r\n                      {/* <button onClick={() => increaseValue()}>add</button> */}\r\n\r\n                      <button\r\n                        onClick={(event) => {\r\n                          event.preventDefault();\r\n                          console.log(\r\n                            `Delete ${_product.id} from the parent ${product.id}`,\r\n                          );\r\n                          deleteUpsellProductById(product.id, _product.id);\r\n                          // try {\r\n\r\n                          //   // const $item = window.document.querySelector(\r\n                          //   //   `.ProductItem-upsell--${_product.id}-${product.id}`,\r\n                          //   // );\r\n\r\n                          //   // if ($item) {\r\n                          //     // $item.style.display = \"none\";\r\n                          //   }\r\n                          // } catch (err) {}\r\n                        }}\r\n                        className=\"icolink\">\r\n                        <span className=\"svg-icon\">\r\n                          <svg\r\n                            width=\"21\"\r\n                            height=\"21\"\r\n                            viewBox=\"0 0 21 21\"\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                            focusable=\"false\">\r\n                            <path d=\"M3.5 5h14a.5.5 0 000-1h-14a.5.5 0 000 1zM5 16a2 2 0 002 2h7a2 2 0 002-2V6h1v10a3 3 0 01-3 3H7a3 3 0 01-3-3V6h1v10zm0 0a2 2 0 002 2h7a2 2 0 002-2V6h1v10a3 3 0 01-3 3H7a3 3 0 01-3-3V6h1v10z\"></path>\r\n                            <path d=\"M7.413 4.78L8.52 3.157c.28-.41.743-.656 1.24-.656h1.425a1.5 1.5 0 011.22.628l1.188 1.663.814-.58-1.188-1.663A2.5 2.5 0 0011.184 1.5H9.76c-.828 0-1.6.41-2.067 1.093L6.587 4.22l.826.56zM10 7.5v8a.5.5 0 001 0v-8a.5.5 0 00-1 0zm-3 0v8a.5.5 0 001 0v-8a.5.5 0 00-1 0zm6 0v8a.5.5 0 001 0v-8a.5.5 0 00-1 0z\"></path>\r\n                          </svg>\r\n                        </span>\r\n                      </button>\r\n                    </div>\r\n                  );\r\n                })}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <Popup\r\n        modal={true}\r\n        onOpen={() => {\r\n          setProduct();\r\n        }}\r\n        trigger={() => {\r\n          return (\r\n            <button type=\"button\" className=\"btn btn-small btn-primary\">\r\n              <span className=\"svg-icon\">\r\n                <svg\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  viewBox=\"0 0 12 12\"\r\n                  focusable=\"false\">\r\n                  <path d=\"M6.712 5.314H11v1.39H6.712V11H5.267V6.706H1V5.314h4.267V1h1.446v4.314z\"></path>\r\n                </svg>\r\n              </span>\r\n              <span className=\"gwt-InlineLabel\">Add Upsell Products</span>\r\n            </button>\r\n          );\r\n        }}\r\n        position=\"center center\">\r\n        <PopupCustom parentID={product.id}></PopupCustom>\r\n      </Popup>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport \"./Products.scss\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\nimport ProductPicker from \"./ProductPicker\";\r\nimport ProductItem from \"./ProductItem\";\r\nimport useStore from \"./store/store\";\r\n\r\nexport default function Products({ upsellProducts }) {\r\n  // const upsellProductsSubscriber = useStore.subscribe(\r\n  //   (upsellProducts, previousupsellProducts) => {\r\n  //     console.log(\"Updated upsell products: \", upsellProducts);\r\n  //   },\r\n  //   (state) => state.upsellProducts,\r\n  // );\r\n\r\n  /* TODO - load database on load */\r\n\r\n  const populateProducts = useStore((state) => state.populateProducts);\r\n  const products = useStore((state) => state.products);\r\n\r\n  useEffect(() => {\r\n    populateProducts();\r\n\r\n    useStore.subscribe(\r\n      (upsellProducts, previousupsellProducts) => {\r\n        console.log(\"upsell products loaded!\");\r\n      },\r\n      (state) => state.upsellProducts,\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"Products  named-area\">\r\n      <div className=\"named-area__body\">\r\n        <div className=\"a-card a-card--compact\">\r\n          <div className=\"a-card__paddings\">\r\n            <h1 className=\"Products-title settings-page__title spacing--mt2\">\r\n              Products!!!\r\n            </h1>\r\n\r\n            {products &&\r\n              products.hasOwnProperty(\"items\") &&\r\n              upsellProducts &&\r\n              products.items.map((e) => (\r\n                <ProductItem\r\n                  key={e.id}\r\n                  product={e}\r\n                  upsell={\r\n                    upsellProducts.filter((x) => x.id === e.id).length >= 1\r\n                      ? upsellProducts.filter((x) => x.id === e.id)[0].bundle\r\n                      : []\r\n                  }></ProductItem>\r\n              ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import \"./App.scss\";\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport useStore from \"./store/store\";\n\nimport Products from \"./Products\";\nimport Skeleton from \"react-loading-skeleton\";\n\nfunction App() {\n  const [storeData, setStoreData] = useState(null);\n  const [products, setProducts] = useState([]);\n  const [upsellProducts, setUpsellProducts] = useState(null);\n\n  const getUpsellProducts = useStore((state) => state.upsellProducts);\n\n  function initDatabaseOnFirstInstall() {\n    window.EcwidApp.setAppPublicConfig(\n      JSON.stringify({ upsellProducts: [] }),\n      function () {\n        console.log(\"New upasell product set up!\");\n      },\n    );\n  }\n\n  useEffect(() => {\n    const data = window.EcwidApp.getPayload();\n\n    setStoreData(data);\n  }, []);\n\n  useEffect(() => {\n    if (window.EcwidApp && window.EcwidApp.getPayload()) {\n      window.EcwidApp.getAppPublicConfig(function (value) {\n        if (!value) {\n          initDatabaseOnFirstInstall();\n        }\n      });\n    }\n\n    (async () => {\n      const upsell = await getUpsellProducts();\n      window.upsellProducts = upsell;\n      setUpsellProducts(upsell);\n\n      console.log(`There are ${upsell.length} products with upsells.`);\n    })();\n  }, [storeData]);\n\n  const ProductSkeleton = () => {\n    return (\n      <React.Fragment>\n        <div className=\"list-element list-element--compact list-element--has-hover list-element--inline-mode SkeletonLoader\">\n          <Skeleton count={1} height={50} />\n          <Skeleton count={3} height={7} />\n        </div>\n        <div className=\"list-element list-element--compact list-element--has-hover list-element--inline-mode SkeletonLoader\">\n          <Skeleton count={1} height={50} />\n          <Skeleton count={3} height={7} />\n        </div>\n        <div className=\"list-element list-element--compact list-element--has-hover list-element--inline-mode SkeletonLoader\">\n          <Skeleton count={1} height={50} />\n          <Skeleton count={3} height={7} />\n        </div>\n      </React.Fragment>\n    );\n  };\n\n  return (\n    <div className=\"EasyUpsellApp\">\n      <div className=\"EasyUpsellApp-container\">\n        {upsellProducts ? (\n          <Products upsellProducts={upsellProducts}></Products>\n        ) : (\n          <ProductSkeleton></ProductSkeleton>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}