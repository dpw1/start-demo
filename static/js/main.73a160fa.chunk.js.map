{"version":3,"sources":["store/store.js","PopupItem.js","PopupCustom.js","ProductItem.js","Products.js","App.js","reportWebVitals.js","index.js"],"names":["useStore","create","set","get","products","populateProducts","a","url","test","window","location","href","EcwidApp","getPayload","store_id","access_token","axios","data","getProductById","id","items","filter","e","parseInt","upsellProducts","Promise","resolve","reject","getAppPublicConfig","value","_data","JSON","parse","console","log","addUpsellProduct","parentID","bundleID","bundleProducts","_parentProduct","length","parentProduct","existingBundles","_existing","bundle","Symbol","iterator","Object","currentProduct","Set","sanitizedBundleProducts","sanitizeBundleProducts","updated","setAppPublicConfig","stringify","err","getUpsellProductById","upsell","deleteUpsellProductById","parent","find","updatedBundle","getCurrentPopupProduct","undefined","setCurrentPopupProduct","PopupItem","product","state","currentProductID","className","src","thumbnailUrl","alt","name","onClick","_","type","xmlns","viewBox","focusable","d","PopupCustom","map","ProductItem","useState","setUpsell","populateUpsells","useEffect","current","_product","event","preventDefault","$item","document","querySelector","style","display","width","height","modal","onOpen","trigger","position","Products","props","subscribe","previousupsellProducts","ProductSkeleton","Fragment","count","hasOwnProperty","App","storeData","setStoreData","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.73a160fa.chunk.js","sourcesContent":["import create from \"zustand\";\r\nimport axios from \"axios\";\r\n\r\nconst initialData = () => {\r\n  return [\r\n    {\r\n      id: 239361082,\r\n      bundle: [359233331],\r\n    },\r\n    {\r\n      id: 358944799,\r\n      bundle: [239361082, 359233331],\r\n    },\r\n  ];\r\n};\r\n\r\nconst useStore = create((set, get) => ({\r\n  /* ## API PRODUCTS\r\n  ==================================== */\r\n  products: [],\r\n\r\n  /* ===============\r\n  Get store's products and populate the store's 'products' variable */\r\n  populateProducts: async () => {\r\n    /* TODO = change this URL when on production */\r\n\r\n    const url = /localhost/.test(window.location.href)\r\n      ? `https://app.ecwid.com/api/v3/37374877/products?token=secret_EkQGe8SC4V4DHgSrnkmXsQsneDQ9JwQ4`\r\n      : `https://app.ecwid.com/api/v3/${\r\n          window.EcwidApp.getPayload().store_id\r\n        }/products?token=${window.EcwidApp.getPayload().access_token}`;\r\n\r\n    const { data: products } = await axios.get(url);\r\n\r\n    set({\r\n      products,\r\n    });\r\n  },\r\n\r\n  /* Get a product from the API by ID */\r\n  getProductById: (id) => {\r\n    return get().products.items.filter((e) => e.id === parseInt(id))[0];\r\n  },\r\n\r\n  /* ## UPSELL PRODUCTS\r\n  ==================================== */\r\n\r\n  /* Get Bundle products that will show up at the front-end. */\r\n  upsellProducts: () => {\r\n    if (window.EcwidApp && window.EcwidApp.getPayload()) {\r\n      return new Promise(async (resolve, reject) => {\r\n        let data = [];\r\n        window.EcwidApp.getAppPublicConfig(function (value) {\r\n          const _data = JSON.parse(value);\r\n          data = data = _data.upsellProducts;\r\n          console.log(\"xxx ECWID DB DATA\", data);\r\n          resolve(data);\r\n        });\r\n      });\r\n    }\r\n\r\n    return [];\r\n  },\r\n\r\n  /* Adds a product to the upsell */\r\n  addUpsellProduct: async (parentID, bundleID) => {\r\n    let bundle;\r\n    let bundleProducts =\r\n      typeof get().upsellProducts === \"function\"\r\n        ? await get().upsellProducts()\r\n        : await get().upsellProducts;\r\n\r\n    const _parentProduct =\r\n      bundleProducts.length >= 1 &&\r\n      bundleProducts.filter((e) => e.id === parentID);\r\n    let parentProduct = _parentProduct.length >= 1 ? _parentProduct[0] : null;\r\n\r\n    console.log(\r\n      `I wanna add the bundle product ${bundleID} to ${\r\n        parentProduct ? `parent ${parentProduct.id}` : `new parent.`\r\n      }`,\r\n    );\r\n\r\n    if (parentProduct) {\r\n      const existingBundles = () => {\r\n        const _existing = parentProduct.bundle;\r\n\r\n        if (Symbol.iterator in Object(_existing)) {\r\n          return [..._existing];\r\n        }\r\n\r\n        return [_existing];\r\n      };\r\n\r\n      bundle = [...existingBundles(), bundleID];\r\n\r\n      bundleProducts = bundleProducts.filter((e) => e.id !== parentID);\r\n    }\r\n\r\n    const currentProduct = {\r\n      id: parentID,\r\n      bundle: bundle && bundle.length >= 1 ? [...new Set(bundle)] : [bundleID],\r\n    };\r\n\r\n    const sanitizeBundleProducts = () => {\r\n      return Symbol.iterator in Object(bundleProducts)\r\n        ? [...bundleProducts]\r\n        : [];\r\n    };\r\n\r\n    const sanitizedBundleProducts = sanitizeBundleProducts();\r\n\r\n    const updated = [...sanitizedBundleProducts, currentProduct];\r\n\r\n    /* Save into Ecwid's database */\r\n    if (window.EcwidApp) {\r\n      try {\r\n        window.EcwidApp.setAppPublicConfig(\r\n          JSON.stringify({ upsellProducts: updated }),\r\n          function () {\r\n            console.log(\"Public config saved!\");\r\n          },\r\n        );\r\n\r\n        console.log(\"Saved upsell products in Database\");\r\n      } catch (err) {}\r\n    }\r\n\r\n    // console.log(\"updated: \", updated);\r\n\r\n    set({\r\n      upsellProducts: updated,\r\n    });\r\n  },\r\n\r\n  /* Get upsell product by ID */\r\n  getUpsellProductById: async (id) => {\r\n    let bundleProducts =\r\n      typeof get().upsellProducts === \"function\"\r\n        ? await get().upsellProducts()\r\n        : await get().upsellProducts;\r\n\r\n    console.log(bundleProducts);\r\n\r\n    // console.log(\"Bundle products:\", bundleProducts);\r\n\r\n    const upsell = bundleProducts.filter((e) => e.id === id);\r\n    return upsell.length >= 1 ? upsell[0].bundle : [];\r\n  },\r\n\r\n  deleteUpsellProductById: async (parentID, bundleID) => {\r\n    let bundleProducts =\r\n      typeof get().upsellProducts === \"function\"\r\n        ? await get().upsellProducts()\r\n        : await get().upsellProducts;\r\n\r\n    let updated = [];\r\n\r\n    const parent = bundleProducts.find((e) => e.id === parentID);\r\n\r\n    const updatedBundle = parent.bundle.filter((e) => e !== bundleID);\r\n\r\n    /* If deleting the last item, remove parent as well */\r\n    if (updatedBundle.length <= 0) {\r\n      updated = bundleProducts.filter((e) => e.id !== parentID);\r\n    } else {\r\n      updated = bundleProducts;\r\n    }\r\n\r\n    parent.bundle = updatedBundle;\r\n\r\n    console.log(\"Updated after delete: \", updated);\r\n\r\n    if (window.EcwidApp) {\r\n      try {\r\n        window.EcwidApp.setAppPublicConfig(\r\n          JSON.stringify({ upsellProducts: updated }),\r\n          function () {\r\n            console.log(\"Public config saved!\");\r\n          },\r\n        );\r\n\r\n        console.log(\"Saved upsell products in Database\");\r\n      } catch (err) {}\r\n    }\r\n\r\n    set({\r\n      upsellProducts: updated,\r\n    });\r\n  },\r\n\r\n  /* ## POPUP PRODUCTS\r\n  ==================================== */\r\n\r\n  /* Get current product being edited in the Popup. */\r\n  getCurrentPopupProduct: undefined,\r\n\r\n  /* Updates current product being edited in the popup. */\r\n  setCurrentPopupProduct: (id) => {\r\n    set({\r\n      getCurrentPopupProduct: id,\r\n    });\r\n  },\r\n}));\r\n\r\nexport default useStore;\r\n","import React, { useRef, useEffect } from \"react\";\r\nimport useStore from \"./store/store\";\r\n\r\nexport default function PopupItem({ product }) {\r\n  const addUpsellProduct = useStore((state) => state.addUpsellProduct);\r\n\r\n  const currentProductID = useStore((state) => state.getCurrentPopupProduct);\r\n\r\n  const addBundleProduct = (id) => {\r\n    addUpsellProduct(currentProductID, id);\r\n  };\r\n\r\n  return (\r\n    <div className=\"PopupItem  list-element list-element--compact list-element--has-hover list-element--inline-mode\">\r\n      <div className=\"list-element__image\">\r\n        <img src={product.thumbnailUrl} alt={product.name} />\r\n      </div>\r\n\r\n      <div className=\"list-element__content\">\r\n        <div className=\"list-element__info\">\r\n          <div className=\"list-element__header\">\r\n            <div className=\"list-element__main-info\">\r\n              <div className=\"list-element__title\">\r\n                <span>{product.name}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <button\r\n        onClick={(_) => addBundleProduct(product.id)}\r\n        type=\"button\"\r\n        className=\"btn btn-small btn-primary\">\r\n        <span className=\"svg-icon\">\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            viewBox=\"0 0 12 12\"\r\n            focusable=\"false\">\r\n            <path d=\"M6.712 5.314H11v1.39H6.712V11H5.267V6.706H1V5.314h4.267V1h1.446v4.314z\"></path>\r\n          </svg>\r\n        </span>\r\n        <span className=\"gwt-InlineLabel\">Add</span>\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useRef, useEffect } from \"react\";\r\nimport PopupItem from \"./PopupItem\";\r\n\r\nimport \"./PopupCustom.scss\";\r\nimport useStore from \"./store/store\";\r\n\r\nexport default function PopupCustom({ parentID }) {\r\n  const products = useStore((state) => state.products);\r\n\r\n  return (\r\n    <div className=\"PopupCustom\">\r\n      <div className=\"a-card__paddings\">\r\n        <h3>Please select the products to upsell: </h3>\r\n      </div>\r\n      {products.items.map((e) => {\r\n        if (e.id === parentID) {\r\n          return;\r\n        }\r\n\r\n        return <PopupItem key={e.id} product={e}></PopupItem>;\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport Popup from \"reactjs-popup\";\r\nimport \"reactjs-popup/dist/index.css\";\r\nimport PopupCustom from \"./PopupCustom\";\r\nimport \"./ProductItem.scss\";\r\nimport useStore from \"./store/store\";\r\nimport Products from \"./Products\";\r\n\r\nexport default function ProductItem({ product }) {\r\n  const [upsell, setUpsell] = useState([]);\r\n\r\n  const upsellProducts = useStore((state) => state.upsellProducts);\r\n  const getUpsellProductById = useStore((state) => state.getUpsellProductById);\r\n  const deleteUpsellProductById = useStore(\r\n    (state) => state.deleteUpsellProductById,\r\n  );\r\n  const getProductById = useStore((state) => state.getProductById);\r\n  const setCurrentPopupProduct = useStore(\r\n    (state) => state.setCurrentPopupProduct,\r\n  );\r\n\r\n  const populateUpsells = async (id) => {\r\n    const bundle = await getUpsellProductById(product.id);\r\n    console.log(\"my ID and  bundle: \", product.id, bundle);\r\n    setUpsell(bundle);\r\n  };\r\n\r\n  // useEffect(() => {\r\n  //   useStore.subscribe(\r\n  //     (upsellProducts, previousupsellProducts) => {\r\n  //       // console.log(\"Updating my upsell\");\r\n  //     },\r\n  //     (state) => state.upsellProducts,\r\n  //   );\r\n  // }, []);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      let bundleProducts =\r\n        typeof upsellProducts === \"function\"\r\n          ? await upsellProducts()\r\n          : await upsellProducts;\r\n\r\n      if (bundleProducts && bundleProducts.length <= 0) {\r\n        return;\r\n      }\r\n      const current = bundleProducts.filter((e) => e.id === product.id)[0];\r\n\r\n      if (!current) {\r\n        return;\r\n      }\r\n\r\n      populateUpsells(product.id);\r\n\r\n      console.log(\"my upsell products [zeroed]\", current);\r\n    })();\r\n  }, [upsellProducts]);\r\n\r\n  const setProduct = () => {\r\n    console.log(\"setting current product: \", product.id);\r\n    setCurrentPopupProduct(product.id);\r\n  };\r\n\r\n  return (\r\n    <div className=\"ProductItem list-element list-element--compact list-element--has-hover list-element--inline-mode\">\r\n      <div className=\"list-element__image\">\r\n        <img src={product.thumbnailUrl} alt={product.name} />\r\n      </div>\r\n\r\n      <div className=\"list-element__content\">\r\n        <div className=\"list-element__info\">\r\n          <div className=\"list-element__header\">\r\n            <div className=\"list-element__main-info\">\r\n              <div className=\"list-element__title\">\r\n                <span>\r\n                  {product.name} {product.id}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"list-element__status-row\">\r\n            <span className=\"order__date-wrapper\">Upsell Products:</span>\r\n            <div className=\"list-element__data-row\">\r\n              {/* <div className=\"ProductItem-upsell\">\r\n                <span className=\"spacing--mr1\">Cool product 1</span>\r\n\r\n                \r\n\r\n                <a className=\"icolink\" href=\"#\">\r\n                  <span className=\"svg-icon\">\r\n                    <svg\r\n                      width=\"21\"\r\n                      height=\"21\"\r\n                      viewBox=\"0 0 21 21\"\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                      focusable=\"false\">\r\n                      <path d=\"M3.5 5h14a.5.5 0 000-1h-14a.5.5 0 000 1zM5 16a2 2 0 002 2h7a2 2 0 002-2V6h1v10a3 3 0 01-3 3H7a3 3 0 01-3-3V6h1v10zm0 0a2 2 0 002 2h7a2 2 0 002-2V6h1v10a3 3 0 01-3 3H7a3 3 0 01-3-3V6h1v10z\"></path>\r\n                      <path d=\"M7.413 4.78L8.52 3.157c.28-.41.743-.656 1.24-.656h1.425a1.5 1.5 0 011.22.628l1.188 1.663.814-.58-1.188-1.663A2.5 2.5 0 0011.184 1.5H9.76c-.828 0-1.6.41-2.067 1.093L6.587 4.22l.826.56zM10 7.5v8a.5.5 0 001 0v-8a.5.5 0 00-1 0zm-3 0v8a.5.5 0 001 0v-8a.5.5 0 00-1 0zm6 0v8a.5.5 0 001 0v-8a.5.5 0 00-1 0z\"></path>\r\n                    </svg>\r\n                  </span>\r\n                </a>\r\n              </div> */}\r\n\r\n              {upsell &&\r\n                upsell.map((e) => {\r\n                  console.log(\"look e\", e);\r\n\r\n                  const _product = getProductById(e);\r\n\r\n                  return (\r\n                    <div\r\n                      key={`${e}_${product.id}`}\r\n                      className={`ProductItem-upsell ProductItem-upsell--${e}-${product.id}`}>\r\n                      <span className=\"spacing--mr1\">{_product.name}</span>\r\n\r\n                      {/* <button onClick={() => increaseValue()}>add</button> */}\r\n\r\n                      <button\r\n                        onClick={(event) => {\r\n                          event.preventDefault();\r\n                          console.log(\r\n                            `Delete ${e} from the parent ${product.id}`,\r\n                          );\r\n\r\n                          try {\r\n                            deleteUpsellProductById(product.id, e);\r\n\r\n                            const $item = window.document.querySelector(\r\n                              `.ProductItem-upsell--${e}-${product.id}`,\r\n                            );\r\n\r\n                            if ($item) {\r\n                              $item.style.display = \"none\";\r\n                            }\r\n                          } catch (err) {}\r\n                        }}\r\n                        className=\"icolink\">\r\n                        <span className=\"svg-icon\">\r\n                          <svg\r\n                            width=\"21\"\r\n                            height=\"21\"\r\n                            viewBox=\"0 0 21 21\"\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                            focusable=\"false\">\r\n                            <path d=\"M3.5 5h14a.5.5 0 000-1h-14a.5.5 0 000 1zM5 16a2 2 0 002 2h7a2 2 0 002-2V6h1v10a3 3 0 01-3 3H7a3 3 0 01-3-3V6h1v10zm0 0a2 2 0 002 2h7a2 2 0 002-2V6h1v10a3 3 0 01-3 3H7a3 3 0 01-3-3V6h1v10z\"></path>\r\n                            <path d=\"M7.413 4.78L8.52 3.157c.28-.41.743-.656 1.24-.656h1.425a1.5 1.5 0 011.22.628l1.188 1.663.814-.58-1.188-1.663A2.5 2.5 0 0011.184 1.5H9.76c-.828 0-1.6.41-2.067 1.093L6.587 4.22l.826.56zM10 7.5v8a.5.5 0 001 0v-8a.5.5 0 00-1 0zm-3 0v8a.5.5 0 001 0v-8a.5.5 0 00-1 0zm6 0v8a.5.5 0 001 0v-8a.5.5 0 00-1 0z\"></path>\r\n                          </svg>\r\n                        </span>\r\n                      </button>\r\n                    </div>\r\n                  );\r\n                })}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <Popup\r\n        modal={true}\r\n        onOpen={() => {\r\n          setProduct();\r\n        }}\r\n        trigger={() => {\r\n          return (\r\n            <button type=\"button\" className=\"btn btn-small btn-primary\">\r\n              <span className=\"svg-icon\">\r\n                <svg\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  viewBox=\"0 0 12 12\"\r\n                  focusable=\"false\">\r\n                  <path d=\"M6.712 5.314H11v1.39H6.712V11H5.267V6.706H1V5.314h4.267V1h1.446v4.314z\"></path>\r\n                </svg>\r\n              </span>\r\n              <span className=\"gwt-InlineLabel\">Add Upsell Products</span>\r\n            </button>\r\n          );\r\n        }}\r\n        position=\"center center\">\r\n        <PopupCustom parentID={product.id}></PopupCustom>\r\n      </Popup>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport \"./Products.scss\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\nimport ProductPicker from \"./ProductPicker\";\r\nimport ProductItem from \"./ProductItem\";\r\nimport useStore from \"./store/store\";\r\n\r\nexport default function Products(props) {\r\n  // const upsellProductsSubscriber = useStore.subscribe(\r\n  //   (upsellProducts, previousupsellProducts) => {\r\n  //     console.log(\"Updated upsell products: \", upsellProducts);\r\n  //   },\r\n  //   (state) => state.upsellProducts,\r\n  // );\r\n\r\n  const upsellProducts = useStore((state) => state.upsellProducts);\r\n  const populateProducts = useStore((state) => state.populateProducts);\r\n  const products = useStore((state) => state.products);\r\n\r\n  useEffect(() => {\r\n    populateProducts();\r\n\r\n    useStore.subscribe(\r\n      (deleteUpsellProductById, previousupsellProducts) => {\r\n        console.log(\"Deleting upsell\");\r\n      },\r\n      (state) => state.deleteUpsellProductById,\r\n    );\r\n  }, []);\r\n\r\n  const ProductSkeleton = () => {\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"list-element list-element--compact list-element--has-hover list-element--inline-mode SkeletonLoader\">\r\n          <Skeleton count={1} height={50} />\r\n          <Skeleton count={3} height={7} />\r\n        </div>\r\n        <div className=\"list-element list-element--compact list-element--has-hover list-element--inline-mode SkeletonLoader\">\r\n          <Skeleton count={1} height={50} />\r\n          <Skeleton count={3} height={7} />\r\n        </div>\r\n        <div className=\"list-element list-element--compact list-element--has-hover list-element--inline-mode SkeletonLoader\">\r\n          <Skeleton count={1} height={50} />\r\n          <Skeleton count={3} height={7} />\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"Products  named-area\">\r\n      <div className=\"named-area__body\">\r\n        <div className=\"a-card a-card--compact\">\r\n          <div className=\"a-card__paddings\">\r\n            <h1 className=\"settings-page__title spacing--mt2\">Products</h1>\r\n\r\n            {products && products.hasOwnProperty(\"items\") ? (\r\n              products.items.map((e) => (\r\n                <ProductItem key={e.id} product={e}></ProductItem>\r\n              ))\r\n            ) : (\r\n              <ProductSkeleton></ProductSkeleton>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import \"./App.scss\";\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\nimport Products from \"./Products\";\n\nfunction App() {\n  const [storeData, setStoreData] = useState(null);\n  const [products, setProducts] = useState([]);\n\n  useEffect(() => {\n    setStoreData(window.EcwidApp.getPayload());\n  }, []);\n\n  useEffect(() => {\n    if (window.EcwidApp && window.EcwidApp.getPayload()) {\n      window.EcwidApp.getAppPublicConfig(function (value) {\n        // console.log(\"my datatata\", JSON.parse(value));\n      });\n    }\n\n    console.log(\"rr my store data: \", storeData);\n  }, [storeData]);\n\n  return (\n    <div className=\"EasyUpsellApp\">\n      <Products></Products>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}