{"version":3,"sources":["utils.js","store/store.js","PopupItem.js","PopupSearch.js","PopupCustom.js","ProductItem.js","Placeholder.js","Products.js","Search.js","Settings.js","App.js","reportWebVitals.js","index.js"],"names":["defaultSettings","isEnabled","sanitizeBundleProducts","productWithBundles","console","log","_step","result","_iterator","_createForOfIteratorHelper","s","n","done","_step2","each","value","parentID","id","bundle","_iterator2","upsell","push","name","thumbnailUrl","defaultDisplayedPriceFormatted","compareToPriceDiscountFormatted","compareToPriceFormatted","url","totalOptions","options","length","err","e","f","useStore","create","subscribeWithSelector","set","get","settings","products","visibleProducts","popupVisibleProducts","populateProducts","_populateProducts","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$get","wrap","_context","prev","next","test","window","location","href","concat","EcwidApp","getPayload","store_id","access_token","axios","sent","data","stop","apply","arguments","updateVisibleProducts","_updateVisibleProducts","_callee2","_context2","_x","updatePopupVisibleProducts","_updatePopupVisibleProducts","_callee3","_context3","_x2","getProductById","items","filter","parseInt","upsellProducts","Promise","_ref","_callee4","resolve","reject","_context4","hasOwnProperty","abrupt","getAppPublicConfig","_data","JSON","parse","_x3","_x4","addUpsellProduct","_addUpsellProduct","_callee5","bundleID","bundleProducts","_parentProduct","parentProduct","parent","bundleProduct","existingBundles","currentProduct","_bundle","_updated","updated","payload","_context5","t0","_existing","Symbol","iterator","Object","_toConsumableArray","Set","stringify","setAppPublicConfig","error","_x5","_x6","getUpsellProductById","_getUpsellProductById","_callee6","res","_context6","_x7","deleteUpsellProductById","_deleteUpsellProductById","_callee7","updatedBundle","_context7","find","_x8","_x9","setSettings","_setSettings","_callee8","_context8","Error","_x10","getCurrentPopupProduct","undefined","setCurrentPopupProduct","PopupItem","product","state","currentProductID","useState","isAddable","setIsAddable","useEffect","_","a","className","src","alt","disabled","onClick","type","xmlns","viewBox","focusable","d","PopupSearch","allProducts","search","setSearch","subscribe","found","toLowerCase","includes","style","width","height","fillRule","clipRule","placeholder","aria-label","onChange","target","PopupCustom","setAllProducts","filtered","map","ProductItem","props","data-upsell-products","_product","event","preventDefault","$item","document","querySelector","display","modal","onOpen","trigger","position","Placeholder","highlightColor","count","Math","floor","random","Products","setUpsell","x","Search","productsStored","Settings","_React$useState","React","_React$useState2","_slicedToArray","modalIsOpen","setIsOpen","_useState","_useState2","setIsEnabled","_jsxs","children","_jsx","Modal","isOpen","onRequestClose","portalClassName","contentLabel","checked","data-on","data-off","App","setStoreData","_useState3","_useState4","setUpsellProducts","_useState5","_useState6","initiated","setInitiated","initDatabaseOnFirstInstall","initial","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.dafed60b.chunk.js","sourcesContent":["export const defaultSettings = {\r\n  isEnabled: false,\r\n};\r\n\r\nexport function sleep(ms) {\r\n  return new Promise((resolve) => setTimeout(resolve, ms));\r\n}\r\n\r\n/*\r\nCleans the bundle products removing all unnecessary properties. \r\n\r\nRequires an object like this:\r\n\r\n[\r\n    {\r\n    \"id\": 123,\r\n    \"bundle\": [\r\n            {\r\n            \"id\": 109109109,\r\n            sku: sdiasjdkajs\r\n            },\r\n            {\r\n            \"id\": 111,\r\n            sku: xxx\r\n            }\r\n        ]\r\n    }\r\n]\r\n*/\r\nexport function sanitizeBundleProducts(productWithBundles) {\r\n  console.log(\"within sanitze: \", productWithBundles);\r\n  var result = [];\r\n\r\n  for (var each of productWithBundles) {\r\n    var parentID = each.id;\r\n    var bundle = [];\r\n\r\n    for (var upsell of each.bundle) {\r\n      bundle.push({\r\n        id: upsell.id,\r\n        name: upsell.name,\r\n        thumbnailUrl: upsell.thumbnailUrl,\r\n        defaultDisplayedPriceFormatted: upsell.defaultDisplayedPriceFormatted,\r\n        compareToPriceDiscountFormatted: upsell.compareToPriceDiscountFormatted,\r\n        compareToPriceFormatted: upsell.compareToPriceFormatted,\r\n        url: upsell.url,\r\n        totalOptions: upsell.options.length,\r\n      });\r\n    }\r\n\r\n    result.push({\r\n      id: parentID,\r\n      bundle,\r\n    });\r\n  }\r\n\r\n  console.log(\"cleaning: \", result);\r\n\r\n  return result;\r\n}\r\n","import create from \"zustand\";\r\nimport axios from \"axios\";\r\nimport { defaultSettings, sanitizeBundleProducts } from \"../utils\";\r\nimport { subscribeWithSelector } from \"zustand/middleware\";\r\n\r\nconst useStore = create(\r\n  subscribeWithSelector((set, get) => ({\r\n    /* ## API PRODUCTS\r\n    ==================================== */\r\n\r\n    /* ===============\r\n    App settings */\r\n    settings: defaultSettings,\r\n\r\n    /* ===============\r\n    All products on the store */\r\n    products: [],\r\n\r\n    /* ===============\r\n    Products that are being searched/currently visible. */\r\n    visibleProducts: [],\r\n\r\n    /* ===============\r\n    Products that are being searched/currently visible within a popup */\r\n    popupVisibleProducts: [],\r\n\r\n    /* ===============\r\n    Get store's products and add them to the store's 'products' variable */\r\n    populateProducts: async () => {\r\n      /* TODO = change this URL when on production */\r\n\r\n      const url = /localhost/.test(window.location.href)\r\n        ? `https://app.ecwid.com/api/v3/37374877/products?token=secret_EkQGe8SC4V4DHgSrnkmXsQsneDQ9JwQ4`\r\n        : `https://app.ecwid.com/api/v3/${\r\n            window.EcwidApp.getPayload().store_id\r\n          }/products?token=${window.EcwidApp.getPayload().access_token}`;\r\n\r\n      const { data: products } = await axios.get(url);\r\n\r\n      set({\r\n        products,\r\n        visibleProducts: products,\r\n      });\r\n    },\r\n\r\n    /* ===============\r\n    Update store's products. Typically used for search */\r\n    updateVisibleProducts: async (products) => {\r\n      set({\r\n        visibleProducts: products,\r\n      });\r\n    },\r\n\r\n    /* ===============\r\n    Update popup visible products. Typically used for search */\r\n    updatePopupVisibleProducts: async (products) => {\r\n      set({\r\n        popupVisibleProducts: products,\r\n      });\r\n    },\r\n\r\n    /* Get a product from the customer's catalog by ID API  */\r\n    getProductById: (id) => {\r\n      return get().products.items.filter((e) => e.id === parseInt(id))[0];\r\n    },\r\n\r\n    /* ## UPSELL PRODUCTS\r\n    ==================================== */\r\n\r\n    /* Get Bundle products that will show up at the front-end. */\r\n    upsellProducts: () => {\r\n      if (window.EcwidApp && window.EcwidApp.getPayload()) {\r\n        return new Promise(async (resolve, reject) => {\r\n          console.log(\"before: \", window.upsellProducts);\r\n\r\n          if (window.hasOwnProperty(\"upsellProducts\")) {\r\n            resolve(window.upsellProducts);\r\n            return;\r\n          } else {\r\n            console.log(\"upsell prods not found\", window.upsellProducts);\r\n            let data = [];\r\n\r\n            window.EcwidApp.getAppPublicConfig(function (value) {\r\n              const _data = JSON.parse(value);\r\n              // console.log(\"xxx ECWID PRE DATA\", _data);\r\n              data = data = _data.upsellProducts;\r\n\r\n              if (!data) {\r\n                window.upsellProducts = [];\r\n                resolve([]);\r\n                return;\r\n              }\r\n\r\n              console.log(\r\n                \"xxx 33ECWID DB DATA\",\r\n                _data,\r\n                data,\r\n                window.upsellProducts,\r\n              );\r\n\r\n              window.upsellProducts = data;\r\n              resolve(data);\r\n              return;\r\n            });\r\n          }\r\n        });\r\n      }\r\n\r\n      return [];\r\n    },\r\n\r\n    /* Adds a product to the upsell */\r\n    addUpsellProduct: async (parentID, bundleID) => {\r\n      let bundle;\r\n      let bundleProducts =\r\n        typeof get().upsellProducts === \"function\"\r\n          ? await get().upsellProducts()\r\n          : await get().upsellProducts;\r\n\r\n      const _parentProduct =\r\n        bundleProducts.length >= 1 &&\r\n        bundleProducts.filter((e) => e.id === parentID);\r\n\r\n      let parentProduct = _parentProduct.length >= 1 ? _parentProduct[0] : null;\r\n\r\n      /* Adds parent to bundle to show it up on front-end later on */\r\n      const parent = get().getProductById(parentID);\r\n\r\n      const bundleProduct = get().getProductById(bundleID);\r\n\r\n      /* If it's an already existing product, adds the extra bundle to it */\r\n      if (parentProduct) {\r\n        const existingBundles = () => {\r\n          const _existing = parentProduct.bundle;\r\n\r\n          if (Symbol.iterator in Object(_existing)) {\r\n            return [..._existing];\r\n          }\r\n\r\n          return [_existing];\r\n        };\r\n\r\n        bundle = [...existingBundles(), bundleProduct];\r\n\r\n        bundleProducts = bundleProducts.filter((e) => e.id !== parentID);\r\n\r\n        console.log(bundleProducts);\r\n      }\r\n\r\n      /* In this \"one-line-if-else\", if the product is having a bundle for the first time,\r\n      it is added to the last line, adding both the parent and the first bundle. ([parent, bundleProduct]) */\r\n      const currentProduct = {\r\n        id: parentID,\r\n        bundle:\r\n          bundle && bundle.length >= 1\r\n            ? [...new Set(bundle)]\r\n            : [parent, bundleProduct],\r\n      };\r\n\r\n      const _bundle =\r\n        Symbol.iterator in Object(bundleProducts) ? [...bundleProducts] : [];\r\n\r\n      const _updated = [..._bundle, currentProduct];\r\n      const updated = sanitizeBundleProducts(_updated);\r\n\r\n      console.log(\"updated -- \", updated);\r\n\r\n      /* Save into Ecwid's database */\r\n      if (window.EcwidApp) {\r\n        try {\r\n          const payload = JSON.stringify({ upsellProducts: updated });\r\n\r\n          console.log(\"payload: \", { upsellProducts: updated });\r\n\r\n          window.EcwidApp.setAppPublicConfig(payload, function () {\r\n            console.log(\"New upsell product saved!\");\r\n          });\r\n        } catch (err) {\r\n          console.error(\r\n            \"Couldn't save upsell product. [store.js - addUpsellProduct()]\",\r\n          );\r\n        }\r\n      }\r\n\r\n      console.log(\"updated: \", updated);\r\n\r\n      set({\r\n        upsellProducts: updated,\r\n      });\r\n    },\r\n\r\n    /* Get the bundle/upsell products of a specific product ID */\r\n    getUpsellProductById: async (id) => {\r\n      let bundleProducts =\r\n        typeof get().upsellProducts === \"function\"\r\n          ? await get().upsellProducts()\r\n          : await get().upsellProducts;\r\n\r\n      const upsell = bundleProducts.filter((e) => e.id === id);\r\n\r\n      const res = upsell.length >= 1 ? upsell[0].bundle : [];\r\n      console.log(\"Bundle products:\", upsell, bundleProducts, id, res);\r\n      return res;\r\n    },\r\n\r\n    deleteUpsellProductById: async (parentID, bundleID) => {\r\n      let bundleProducts =\r\n        typeof get().upsellProducts === \"function\"\r\n          ? await get().upsellProducts()\r\n          : await get().upsellProducts;\r\n\r\n      let updated = [];\r\n\r\n      const parent = bundleProducts.find((e) => e.id === parentID);\r\n\r\n      if (!parent) {\r\n        console.log(\"parent is undefined!!!\");\r\n        return;\r\n      }\r\n\r\n      console.log(\"deleted bundle from parent: \", parent, parentID, bundleID);\r\n      const updatedBundle = parent.bundle.filter((e) => e.id !== bundleID);\r\n\r\n      /* If deleting the last item, remove parent as well.\r\n    We use the number \"1\" because we always add the parent as an upsell. */\r\n      if (updatedBundle.length <= 1) {\r\n        updated = bundleProducts.filter((e) => e.id !== parentID);\r\n      } else {\r\n        updated = bundleProducts;\r\n      }\r\n\r\n      parent.bundle = updatedBundle;\r\n\r\n      console.log(\"Updated after delete: \", updated);\r\n\r\n      if (window.EcwidApp) {\r\n        try {\r\n          window.EcwidApp.setAppPublicConfig(\r\n            JSON.stringify({ upsellProducts: updated }),\r\n            function () {\r\n              console.log(\"Public config saved!\");\r\n            },\r\n          );\r\n\r\n          console.log(\"Saved upsell products in Database\");\r\n        } catch (err) {}\r\n      }\r\n\r\n      set({\r\n        upsellProducts: updated,\r\n      });\r\n    },\r\n\r\n    setSettings: async (settings) => {\r\n      if (!settings) {\r\n        throw new Error(\"no settings object\");\r\n      }\r\n\r\n      const upsellProducts =\r\n        typeof get().upsellProducts === \"function\"\r\n          ? await get().upsellProducts()\r\n          : await get().upsellProducts;\r\n\r\n      if (window.EcwidApp) {\r\n        try {\r\n          const payload = { settings, upsellProducts };\r\n\r\n          window.EcwidApp.setAppPublicConfig(\r\n            JSON.stringify(payload),\r\n            function (e) {\r\n              console.log(\"Public config saved. Payload: \", payload);\r\n            },\r\n          );\r\n\r\n          console.log(\"Saved settings in Database\");\r\n        } catch (err) {}\r\n      }\r\n\r\n      set({\r\n        settings,\r\n      });\r\n    },\r\n\r\n    /* ## POPUP PRODUCTS\r\n    ==================================== */\r\n\r\n    /* Get current product being edited in the Popup. */\r\n    getCurrentPopupProduct: undefined,\r\n\r\n    /* Updates current product being edited in the popup. */\r\n    setCurrentPopupProduct: (id) => {\r\n      set({\r\n        getCurrentPopupProduct: id,\r\n      });\r\n    },\r\n  })),\r\n);\r\n\r\nexport { useStore };\r\n","import React, { useRef, useState, useEffect } from \"react\";\r\nimport { useStore } from \"./store/store\";\r\n\r\nexport default function PopupItem({ product, parentID }) {\r\n  const addUpsellProduct = useStore((state) => state.addUpsellProduct);\r\n\r\n  const currentProductID = useStore((state) => state.getCurrentPopupProduct);\r\n  const getUpsellProductById = useStore((state) => state.getUpsellProductById);\r\n  const getCurrentPopupProduct = useStore(\r\n    (state) => state.getCurrentPopupProduct,\r\n  );\r\n\r\n  const [isAddable, setIsAddable] = useState(true);\r\n\r\n  const addBundleProduct = (id) => {\r\n    addUpsellProduct(currentProductID, id);\r\n\r\n    setIsAddable(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    (async (_) => {\r\n      const upsell = await getUpsellProductById(parentID);\r\n\r\n      if (upsell.filter((e) => e.id === product.id).length >= 1) {\r\n        setIsAddable(false);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"PopupItem  list-element list-element--compact list-element--has-hover list-element--inline-mode\">\r\n      <div className=\"list-element__image\">\r\n        <img src={product.thumbnailUrl} alt={product.name} />\r\n      </div>\r\n\r\n      <div className=\"list-element__content\">\r\n        <div className=\"list-element__info\">\r\n          <div className=\"list-element__header\">\r\n            <div className=\"list-element__main-info\">\r\n              <div className=\"list-element__title\">\r\n                <span>{product.name}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <button\r\n        disabled={isAddable ? false : true}\r\n        onClick={(_) => addBundleProduct(product.id)}\r\n        type=\"button\"\r\n        className=\"btn btn-small btn-primary\">\r\n        <span className=\"svg-icon\">\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            viewBox=\"0 0 12 12\"\r\n            focusable=\"false\">\r\n            <path d=\"M6.712 5.314H11v1.39H6.712V11H5.267V6.706H1V5.314h4.267V1h1.446v4.314z\"></path>\r\n          </svg>\r\n        </span>\r\n        <span className=\"gwt-InlineLabel\">{isAddable ? \"Add\" : \"Added\"}</span>\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport \"reactjs-popup/dist/index.css\";\r\nimport PopupCustom from \"./PopupCustom\";\r\nimport \"./PopupSearch.scss\";\r\nimport { useStore } from \"./store/store\";\r\n\r\nimport Products from \"./Products\";\r\n\r\nexport default function PopupSearch({ allProducts }) {\r\n  const [search, setSearch] = useState(\"\");\r\n  const [products, setProducts] = useState([]);\r\n\r\n  let productsStored = false;\r\n\r\n  const updatePopupVisibleProducts = useStore(\r\n    (state) => state.updatePopupVisibleProducts,\r\n  );\r\n  const popupVisibleProducts = useStore((state) => state.popupVisibleProducts);\r\n\r\n  const databaseProducts = useStore((state) => state.products);\r\n\r\n  useEffect(() => {\r\n    useStore.subscribe(\r\n      (state) => state.popupVisibleProducts,\r\n      (e) => {\r\n        console.log(\"prods\", e);\r\n      },\r\n    );\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(\"popup search all produs\", allProducts, search.length);\r\n\r\n    if (search.length <= 0) {\r\n      updatePopupVisibleProducts(allProducts);\r\n      return;\r\n    }\r\n\r\n    const found = allProducts.items.filter((e) => {\r\n      if (e.name.toLowerCase().includes(search.toLowerCase())) {\r\n        return e;\r\n      }\r\n\r\n      return null;\r\n    });\r\n\r\n    console.log(\"res: \", found);\r\n\r\n    const res = JSON.parse(JSON.stringify(popupVisibleProducts));\r\n    res.items = found;\r\n\r\n    console.log(res);\r\n\r\n    updatePopupVisibleProducts(res);\r\n  }, [search]);\r\n\r\n  return (\r\n    <div className=\"PopupSearch\">\r\n      <div className=\"field field--medium\">\r\n        <span className=\"fieldset__svg-icon\" style={{}}>\r\n          <svg\r\n            width={18}\r\n            height={18}\r\n            viewBox=\"0 0 18 18\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            focusable=\"false\">\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              clipRule=\"evenodd\"\r\n              d=\"M18 7c0 3.866-3.134 7-7 7-1.5724 0-3.0236-.5184-4.1922-1.3936l-4.1007 4.1007c-.3905.3905-1.0237.3905-1.4142 0-.3905-.3906-.3905-1.0237 0-1.4143l4.1007-4.1007C4.5184 10.0236 4 8.5723 4 7c0-3.866 3.134-7 7-7s7 3.134 7 7zm-2 0c0 2.7614-2.2386 5-5 5S6 9.7614 6 7s2.2386-5 5-5 5 2.2386 5 5z\"\r\n            />\r\n          </svg>\r\n        </span>{\" \"}\r\n        <input\r\n          value={search}\r\n          type=\"text\"\r\n          className=\"field__input\"\r\n          id=\"gwt-uid-3188\"\r\n          placeholder=\"Search product!\"\r\n          aria-label=\"Search product\"\r\n          onChange={(e) => setSearch(e.target.value)}\r\n        />{\" \"}\r\n        <span className=\"field-state--success\">\r\n          <svg\r\n            width={18}\r\n            height={18}\r\n            viewBox=\"0 0 18 18\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            focusable=\"false\">\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              clipRule=\"evenodd\"\r\n              d=\"M16.6508 2.7408c.4193.3594.4679.9907.1085 1.41l-9 10.5c-.3791.4423-1.0545.4682-1.4664.0563l-5-5c-.3905-.3905-.3905-1.0237 0-1.4142.3905-.3905 1.0237-.3905 1.4142 0l4.2364 4.2364 8.2972-9.68c.3595-.4194.9908-.468 1.4101-.1085z\"\r\n            />\r\n          </svg>\r\n        </span>{\" \"}\r\n        <span className=\"field-state--close\">\r\n          <svg\r\n            width={18}\r\n            height={18}\r\n            viewBox=\"0 0 18 18\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            focusable=\"false\">\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              clipRule=\"evenodd\"\r\n              d=\"M1.7929 1.7929c.3905-.3905 1.0237-.3905 1.4142 0L9 7.5858l5.7929-5.793c.3905-.3904 1.0237-.3904 1.4142 0 .3905.3906.3905 1.0238 0 1.4143L10.4142 9l5.7929 5.7929c.3905.3905.3905 1.0237 0 1.4142-.3905.3905-1.0237.3905-1.4142 0L9 10.4142l-5.7929 5.7929c-.3905.3905-1.0237.3905-1.4142 0-.3905-.3905-.3905-1.0237 0-1.4142L7.5858 9l-5.793-5.7929c-.3904-.3905-.3904-1.0237 0-1.4142z\"\r\n            />\r\n          </svg>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport PopupItem from \"./PopupItem\";\r\n\r\nimport \"./PopupCustom.scss\";\r\nimport { useStore } from \"./store/store\";\r\nimport PopupSearch from \"./PopupSearch\";\r\n\r\nexport default function PopupCustom({ parentID }) {\r\n  const [visibleProducts, setVisibleProducts] = useState([]);\r\n\r\n  const products = useStore((state) => state.products);\r\n  const popupVisibleProducts = useStore((state) => state.popupVisibleProducts);\r\n  const updatePopupVisibleProducts = useStore(\r\n    (state) => state.updatePopupVisibleProducts,\r\n  );\r\n  const [allProducts, setAllProducts] = useState([]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"updating popups visible\", products);\r\n    const filtered = JSON.parse(JSON.stringify(products));\r\n    filtered.items = products.items.filter((e) => e.id !== parentID);\r\n    updatePopupVisibleProducts(filtered);\r\n    setAllProducts(filtered);\r\n    useStore.subscribe(\r\n      (state) => state.popupVisibleProducts,\r\n      (e) => {\r\n        console.log(\"wihtn subscribe\", e);\r\n      },\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"PopupCustom\">\r\n      <div className=\"a-card__paddings\">\r\n        <h3 className=\"PopupCustom-title\">Products to upsell : </h3>\r\n      </div>\r\n      <PopupSearch allProducts={allProducts}></PopupSearch>\r\n      <div className=\"PopupCustom-products\">\r\n        {popupVisibleProducts &&\r\n          popupVisibleProducts.hasOwnProperty(`items`) &&\r\n          popupVisibleProducts.items.length >= 1 &&\r\n          popupVisibleProducts.items.map((e) => {\r\n            return (\r\n              <PopupItem parentID={parentID} key={e.id} product={e}></PopupItem>\r\n            );\r\n          })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport Popup from \"reactjs-popup\";\r\nimport \"reactjs-popup/dist/index.css\";\r\nimport PopupCustom from \"./PopupCustom\";\r\nimport \"./ProductItem.scss\";\r\nimport { useStore } from \"./store/store\";\r\n\r\nimport Products from \"./Products\";\r\n\r\nexport default function ProductItem(props) {\r\n  const { product, upsell } = props;\r\n  // const [upsell, setUpsell] = useState([]);\r\n\r\n  const getUpsellProductById = useStore((state) => state.getUpsellProductById);\r\n  const deleteUpsellProductById = useStore(\r\n    (state) => state.deleteUpsellProductById,\r\n  );\r\n\r\n  const getCurrentPopupProduct = useStore(\r\n    (state) => state.getCurrentPopupProduct,\r\n  );\r\n  const getProductById = useStore((state) => state.getProductById);\r\n  const setCurrentPopupProduct = useStore(\r\n    (state) => state.setCurrentPopupProduct,\r\n  );\r\n\r\n  useEffect(() => {\r\n    // (async (_) => {\r\n    //   // handlePopulateUpsell();\r\n    // })();\r\n    // useStore.subscribe(async (e) => {\r\n    //   handlePopulateUpsell(e);\r\n    // });\r\n\r\n    console.log(\"my upsell: \", upsell);\r\n    if (upsell && upsell.length >= 1) {\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(\"current popup: \", getCurrentPopupProduct);\r\n  }, [getCurrentPopupProduct]);\r\n\r\n  const setProduct = () => {\r\n    console.log(\"setting current product: \", product.id);\r\n    setCurrentPopupProduct(product.id);\r\n  };\r\n\r\n  return (\r\n    <div className=\"ProductItem list-element list-element--compact list-element--has-hover list-element--inline-mode\">\r\n      <div className=\"list-element__image\">\r\n        <img src={product.thumbnailUrl} alt={product.name} />\r\n      </div>\r\n\r\n      <div className=\"list-element__content\">\r\n        <div className=\"list-element__info\">\r\n          <div className=\"list-element__header\">\r\n            <div className=\"list-element__main-info\">\r\n              <div className=\"list-element__title\">\r\n                <span>\r\n                  {product.name} {product.id}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div\r\n            className=\"list-element__status-row\"\r\n            data-upsell-products={\r\n              upsell.hasOwnProperty(\"bundle\") ? upsell.bundle.length : 0\r\n            }>\r\n            <div className=\"list-element__data-row\">\r\n              {upsell &&\r\n                upsell.hasOwnProperty(\"bundle\") &&\r\n                upsell.bundle.map((e) => {\r\n                  const _product = e;\r\n\r\n                  /* If the upsell product is the same as the parent, do not add it to the list. */\r\n                  if (_product.id === product.id) {\r\n                    return;\r\n                  }\r\n\r\n                  return (\r\n                    <div\r\n                      key={`${_product.id}_${product.id}`}\r\n                      className={`ProductItem-upsell ProductItem-upsell--${_product.id}-${product.id}`}>\r\n                      <img\r\n                        className=\"ProductItem-image\"\r\n                        src={_product.thumbnailUrl}\r\n                        alt=\"\"\r\n                      />\r\n                      <span className=\"ProductItem-title spacing--mr1\">\r\n                        {_product.name}\r\n                      </span>\r\n\r\n                      <button\r\n                        className=\"ProductItem-delete icolink\"\r\n                        onClick={(event) => {\r\n                          event.preventDefault();\r\n                          console.log(\r\n                            `Delete ${_product.id} from the parent ${product.id}`,\r\n                          );\r\n                          deleteUpsellProductById(product.id, _product.id);\r\n                          try {\r\n                            const $item = window.document.querySelector(\r\n                              `.ProductItem-upsell--${_product.id}-${product.id}`,\r\n                            );\r\n\r\n                            if ($item) {\r\n                              $item.style.display = \"none\";\r\n                            }\r\n                          } catch (err) {\r\n                            console.log(\"Removing error\", err);\r\n                          }\r\n                        }}>\r\n                        <svg\r\n                          width={18}\r\n                          height={18}\r\n                          viewBox=\"0 0 18 18\"\r\n                          xmlns=\"http://www.w3.org/2000/svg\"\r\n                          focusable=\"false\">\r\n                          <path d=\"M7 0h4l1 2H6l1-2z\" />\r\n                          <path\r\n                            fillRule=\"evenodd\"\r\n                            clipRule=\"evenodd\"\r\n                            d=\"M2 3c-.5523 0-1 .4477-1 1s.4477 1 1 1v11c0 1.1046.8954 2 2 2h10c1.1046 0 2-.8954 2-2V5c.5523 0 1-.4477 1-1s-.4477-1-1-1H2zm12 13V5H4v11h10z\"\r\n                          />\r\n                          <path d=\"M6 7.5c0-.5523.4477-1 1-1s1 .4477 1 1v6c0 .5523-.4477 1-1 1s-1-.4477-1-1v-6zM10 7.5c0-.5523.4477-1 1-1s1 .4477 1 1v6c0 .5523-.4477 1-1 1s-1-.4477-1-1v-6z\" />\r\n                        </svg>\r\n                      </button>\r\n                    </div>\r\n                  );\r\n                })}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <Popup\r\n        modal={true}\r\n        onOpen={() => {\r\n          setProduct();\r\n        }}\r\n        trigger={() => {\r\n          return (\r\n            <button type=\"button\" className=\"btn btn-small btn-primary\">\r\n              <span className=\"svg-icon\">\r\n                <svg\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  viewBox=\"0 0 12 12\"\r\n                  focusable=\"false\">\r\n                  <path d=\"M6.712 5.314H11v1.39H6.712V11H5.267V6.706H1V5.314h4.267V1h1.446v4.314z\"></path>\r\n                </svg>\r\n              </span>\r\n              <span className=\"gwt-InlineLabel\">Add Upsell Products</span>\r\n            </button>\r\n          );\r\n        }}\r\n        position=\"center center\">\r\n        <PopupCustom parentID={product.id}></PopupCustom>\r\n      </Popup>\r\n    </div>\r\n  );\r\n}\r\n","import Skeleton from \"react-loading-skeleton\";\r\nimport \"./Placeholder.scss\";\r\n\r\nexport const Placeholder = () => {\r\n  return (\r\n    <div className=\"Placeholder\">\r\n      <div className=\"Placeholder-item\">\r\n        <Skeleton\r\n          className=\"Placeholder-image\"\r\n          highlightColor={\"#ff0000\"}\r\n          count={1}\r\n        />\r\n\r\n        <Skeleton\r\n          className=\"Placeholder-title\"\r\n          highlightColor={\"#ff0000\"}\r\n          width={Math.floor(Math.random() * (300 - 150 + 1) + 150)}\r\n          count={1}\r\n        />\r\n\r\n        <Skeleton\r\n          className=\"Placeholder-button\"\r\n          highlightColor={\"#ff0000\"}\r\n          count={1}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"Placeholder-item\">\r\n        <Skeleton\r\n          className=\"Placeholder-image\"\r\n          highlightColor={\"#ff0000\"}\r\n          count={1}\r\n        />\r\n\r\n        <Skeleton\r\n          className=\"Placeholder-title\"\r\n          highlightColor={\"#ff0000\"}\r\n          width={Math.floor(Math.random() * (300 - 150 + 1) + 150)}\r\n          count={1}\r\n        />\r\n\r\n        <Skeleton\r\n          className=\"Placeholder-button\"\r\n          highlightColor={\"#ff0000\"}\r\n          count={1}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"Placeholder-item\">\r\n        <Skeleton\r\n          className=\"Placeholder-image\"\r\n          highlightColor={\"#ff0000\"}\r\n          count={1}\r\n        />\r\n\r\n        <Skeleton\r\n          className=\"Placeholder-title\"\r\n          highlightColor={\"#ff0000\"}\r\n          width={Math.floor(Math.random() * (300 - 150 + 1) + 150)}\r\n          count={1}\r\n        />\r\n\r\n        <Skeleton\r\n          className=\"Placeholder-button\"\r\n          highlightColor={\"#ff0000\"}\r\n          count={1}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport \"./Products.scss\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\nimport ProductPicker from \"./ProductPicker\";\r\nimport ProductItem from \"./ProductItem\";\r\nimport { useStore } from \"./store/store\";\r\nimport { Placeholder } from \"./Placeholder\";\r\n\r\nexport default function Products({ upsellProducts }) {\r\n  const populateProducts = useStore((state) => state.populateProducts);\r\n  const products = useStore((state) => state.visibleProducts);\r\n\r\n  const [upsell, setUpsell] = useState(upsellProducts);\r\n\r\n  useEffect(() => {\r\n    populateProducts();\r\n\r\n    console.log(\"total prods\", products);\r\n\r\n    useStore.subscribe(\r\n      (state) => state.upsellProducts,\r\n      (e) => {\r\n        setUpsell(e);\r\n        console.log(\"visible upsells updated, let's upd!\", e);\r\n      },\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"Products  named-area\">\r\n      <div className=\"Products-items\">\r\n        {products && products.hasOwnProperty(\"items\") ? (\r\n          products.items.map((e) => (\r\n            <ProductItem\r\n              key={e.id}\r\n              product={e}\r\n              upsell={\r\n                upsell.filter((x) => x.id === e.id).length >= 1\r\n                  ? upsell.filter((x) => x.id === e.id)[0]\r\n                  : []\r\n              }></ProductItem>\r\n          ))\r\n        ) : (\r\n          <Placeholder></Placeholder>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport \"reactjs-popup/dist/index.css\";\r\nimport PopupCustom from \"./PopupCustom\";\r\nimport \"./Search.scss\";\r\nimport { useStore } from \"./store/store\";\r\n\r\nimport Products from \"./Products\";\r\n\r\nexport default function Search() {\r\n  const [search, setSearch] = useState(\"\");\r\n  const [allProducts, setAllProducts] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n\r\n  let productsStored = false;\r\n\r\n  const databaseProducts = useStore((state) => state.products);\r\n  const updateVisibleProducts = useStore(\r\n    (state) => state.updateVisibleProducts,\r\n  );\r\n\r\n  useEffect(() => {\r\n    useStore.subscribe(\r\n      (state) => state.products,\r\n      (e) => {\r\n        if (productsStored) {\r\n          return;\r\n        }\r\n\r\n        if (e.hasOwnProperty(\"items\") && e.items.length >= 1) {\r\n          setAllProducts(e);\r\n          console.log(\"SEARCH!!!\", e);\r\n          productsStored = true;\r\n        }\r\n      },\r\n    );\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(allProducts);\r\n\r\n    if (search.length <= 0) {\r\n      console.log(\"updating all products\", allProducts);\r\n      updateVisibleProducts(allProducts);\r\n    }\r\n\r\n    if (allProducts && allProducts.items && allProducts.items.length >= 1) {\r\n      const found = allProducts.items.filter((e) => {\r\n        if (e.name.toLowerCase().includes(search.toLowerCase())) {\r\n          return e;\r\n        }\r\n\r\n        return null;\r\n      });\r\n\r\n      console.log(\"Found this: \", found);\r\n\r\n      const res = JSON.parse(JSON.stringify(allProducts));\r\n      res.items = found;\r\n\r\n      console.log(res);\r\n\r\n      updateVisibleProducts(res);\r\n    }\r\n  }, [search]);\r\n\r\n  return (\r\n    <div className=\"Search\">\r\n      <div className=\"field field--medium\">\r\n        <span className=\"fieldset__svg-icon\" style={{}}>\r\n          <svg\r\n            width={18}\r\n            height={18}\r\n            viewBox=\"0 0 18 18\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            focusable=\"false\">\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              clipRule=\"evenodd\"\r\n              d=\"M18 7c0 3.866-3.134 7-7 7-1.5724 0-3.0236-.5184-4.1922-1.3936l-4.1007 4.1007c-.3905.3905-1.0237.3905-1.4142 0-.3905-.3906-.3905-1.0237 0-1.4143l4.1007-4.1007C4.5184 10.0236 4 8.5723 4 7c0-3.866 3.134-7 7-7s7 3.134 7 7zm-2 0c0 2.7614-2.2386 5-5 5S6 9.7614 6 7s2.2386-5 5-5 5 2.2386 5 5z\"\r\n            />\r\n          </svg>\r\n        </span>{\" \"}\r\n        <input\r\n          value={search}\r\n          type=\"text\"\r\n          className=\"field__input\"\r\n          id=\"gwt-uid-3188\"\r\n          placeholder=\"Search product\"\r\n          aria-label=\"Search product\"\r\n          onChange={(e) => setSearch(e.target.value)}\r\n        />{\" \"}\r\n        <span className=\"field-state--success\">\r\n          <svg\r\n            width={18}\r\n            height={18}\r\n            viewBox=\"0 0 18 18\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            focusable=\"false\">\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              clipRule=\"evenodd\"\r\n              d=\"M16.6508 2.7408c.4193.3594.4679.9907.1085 1.41l-9 10.5c-.3791.4423-1.0545.4682-1.4664.0563l-5-5c-.3905-.3905-.3905-1.0237 0-1.4142.3905-.3905 1.0237-.3905 1.4142 0l4.2364 4.2364 8.2972-9.68c.3595-.4194.9908-.468 1.4101-.1085z\"\r\n            />\r\n          </svg>\r\n        </span>{\" \"}\r\n        <span className=\"field-state--close\">\r\n          <svg\r\n            width={18}\r\n            height={18}\r\n            viewBox=\"0 0 18 18\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            focusable=\"false\">\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              clipRule=\"evenodd\"\r\n              d=\"M1.7929 1.7929c.3905-.3905 1.0237-.3905 1.4142 0L9 7.5858l5.7929-5.793c.3905-.3904 1.0237-.3904 1.4142 0 .3905.3906.3905 1.0238 0 1.4143L10.4142 9l5.7929 5.7929c.3905.3905.3905 1.0237 0 1.4142-.3905.3905-1.0237.3905-1.4142 0L9 10.4142l-5.7929 5.7929c-.3905.3905-1.0237.3905-1.4142 0-.3905-.3905-.3905-1.0237 0-1.4142L7.5858 9l-5.793-5.7929c-.3904-.3905-.3904-1.0237 0-1.4142z\"\r\n            />\r\n          </svg>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\n\r\nimport Modal from \"react-modal\";\r\n\r\nimport \"./Settings.scss\";\r\nimport { useStore } from \"./store/store\";\r\n\r\nexport default function Settings() {\r\n  const [modalIsOpen, setIsOpen] = React.useState(false);\r\n  const [isEnabled, setIsEnabled] = useState(false);\r\n\r\n  const setSettings = useStore((state) => state.setSettings);\r\n  const settings = useStore((state) => state.settings);\r\n\r\n  function openModal() {\r\n    setIsOpen(true);\r\n  }\r\n\r\n  function closeModal() {\r\n    setIsOpen(false);\r\n  }\r\n\r\n  useEffect(() => {\r\n    console.log(\"my settings\", settings);\r\n\r\n    setIsEnabled(settings.isEnabled);\r\n  }, [settings]);\r\n\r\n  return (\r\n    <div>\r\n      <button onClick={openModal}>Settings</button>\r\n      <Modal\r\n        isOpen={modalIsOpen}\r\n        onRequestClose={closeModal}\r\n        portalClassName=\"Settings\"\r\n        contentLabel=\"Example Modal\">\r\n        <div className=\"Settings-wrapper\">\r\n          <h2>Settings</h2>\r\n          <div className=\"a-card a-card--compact\">\r\n            <div className=\"a-card__paddings\">\r\n              <div className=\"form-area\">\r\n                <div className=\"form-area__title form-area__title--medium\">\r\n                  <span className=\"gwt-InlineLabel\">Enable app</span>\r\n                </div>{\" \"}\r\n                <div className=\"form-area__content form-area__content--no-margin\">\r\n                  <div className=\"text-default\">\r\n                    <label className=\"checkbox micro\">\r\n                      <input\r\n                        name=\"\"\r\n                        checked={isEnabled}\r\n                        onChange={() => {\r\n                          setIsEnabled(!isEnabled);\r\n                          setSettings({\r\n                            isEnabled: !isEnabled,\r\n                          });\r\n                          return;\r\n                        }}\r\n                        type=\"checkbox\"\r\n                      />{\" \"}\r\n                      <div data-on=\"Enabled\" data-off=\"Disabled\">\r\n                        {\" \"}\r\n                        <div />{\" \"}\r\n                      </div>\r\n                      <span className=\"checkbox__on-text-placeholder\">\r\n                        Enabled\r\n                      </span>\r\n                      <span className=\"checkbox__off-text-placeholder\">\r\n                        Disabled\r\n                      </span>\r\n                    </label>\r\n                  </div>{\" \"}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n","import \"./App.scss\";\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useStore } from \"./store/store\";\nimport { shallow } from \"zustand/shallow\";\nimport Products from \"./Products\";\nimport { subscribeWithSelector } from \"zustand/middleware\";\nimport { create } from \"zustand\";\nimport Search from \"./Search\";\nimport { Placeholder } from \"./Placeholder\";\nimport Settings from \"./Settings\";\nimport { defaultSettings } from \"./utils\";\n\nfunction App() {\n  const [storeData, setStoreData] = useState(null);\n  const [upsellProducts, setUpsellProducts] = useState(null);\n  const [initiated, setInitiated] = useState(false);\n\n  const getUpsellProducts = useStore((state) => state.upsellProducts);\n  const setSettings = useStore((state) => state.setSettings);\n\n  function initDatabaseOnFirstInstall(value) {\n    value = JSON.parse(value);\n    let mustInit = false;\n\n    let initial = {};\n\n    initial.upsellProducts = value.hasOwnProperty(\"upsellProducts\")\n      ? value.upsellProducts\n      : [];\n    initial.settings = value.hasOwnProperty(\"settings\") ? value.settings : [];\n\n    console.log(\"!Must create new database? \", mustInit, initial);\n    console.log(\"vaue\", value);\n\n    if (mustInit) {\n      window.EcwidApp.setAppPublicConfig(JSON.stringify(initial), function (e) {\n        console.log(\"Fresh database setup!\", e);\n      });\n    }\n\n    setUpsellProducts(initial.upsellProducts);\n    setSettings(initial.settings);\n\n    setInitiated(true);\n  }\n\n  useEffect(() => {\n    const data = window.EcwidApp.getPayload();\n\n    setStoreData(data);\n\n    useStore.subscribe(\n      (state) => state.upsellProducts,\n      (e) => {\n        console.log(\"upsell products update from app!\", e);\n      },\n    );\n\n    useStore.subscribe(\n      (state) => state.settings,\n      (e) => {\n        console.log(\"settings update from app!\", e);\n      },\n    );\n\n    if (!window.EcwidApp.getPayload()) {\n      /* Used for dev */\n      initDatabaseOnFirstInstall(\n        JSON.stringify({\n          upsellProducts: [],\n          settings: defaultSettings,\n        }),\n      );\n    }\n\n    if (window.EcwidApp && window.EcwidApp.getPayload() && !initiated) {\n      window.EcwidApp.getAppPublicConfig(function (value) {\n        console.log(\"has init?\", initiated);\n\n        initDatabaseOnFirstInstall(value);\n      });\n    }\n  }, []);\n\n  return (\n    <div className=\"EasyUpsellApp\">\n      <div className=\"EasyUpsellApp-container\">\n        <div className=\"named-area\">\n          <div className=\"named-area__body\">\n            <div className=\"a-card a-card--compact\">\n              <div className=\"a-card__paddings\">\n                <h1 className=\"Products-title settings-page__title spacing--mt2\">\n                  EZFY Cart Upsell!\n                </h1>\n                <Settings></Settings>\n                <Search></Search>\n                {upsellProducts ? (\n                  <Products upsellProducts={upsellProducts}></Products>\n                ) : (\n                  <Placeholder></Placeholder>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}